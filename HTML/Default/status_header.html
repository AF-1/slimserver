[%- IF !embedded %]
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="/html/ext/resources/css/ext-all.css?r=[% revision %]" />
		<link rel="stylesheet" type="text/css" href="[% webroot %]slim-ext.css?r=[% revision %]" />

		[% PROCESS standardheader.html %]

		<script type="text/javascript" src="/html/ext/adapter/ext/ext-base.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/ext/ext-all[% IF debug %]-debug[% END %].js?r=[% revision %]"></script>
		<script type="text/javascript">[% PROCESS html/vars.js %]</script>

		<style>
			body { margin: 0; }
		</style>

		<script type="text/javascript" src="[% webroot %]html/utils.js?r=[% revision %]"></script>
		<script type="text/javascript" src="[% webroot %]html/main.js?r=[% revision %]"></script>
		<script type="text/javascript">
			var strings = new Array();

			Ext.EventManager.onDocumentReady(Player.init, Player, true);
			Ext.EventManager.onDocumentReady(function(){
				Utils.processCommand({
					params: [ '', [ 'player', 'canpoweroff', playerid, '?' ] ],
					scope: this,
	
					success: function(response){
						if (response && response.responseText) {
							response = Ext.util.JSON.decode(response.responseText);

							if (response.result && response.result._canpoweroff != null) {
								var el = Ext.get('ctrlPower');
								if (el)
									el.setVisible(response.result._canpoweroff);
							}
						}
					}
				});
			});
		</script>

		<!--[if IE 6]>
		<link href="[% webroot %]ie.css?r=[% revision %]" type="text/css" rel="stylesheet">
		<![endif]-->
		<!--[if IE 7]>
		<link href="[% webroot %]ie7.css?r=[% revision %]" type="text/css" rel="stylesheet">
		<![endif]-->

		[% IF debug %]
		<style>
			.x-layout-panel-body { background: white; }
			.x-btn-text, .x-btn button { color: black; }
			.x-dlg .x-tabs-bottom .x-tabs-body {
				background: white;
				color: black;
			}
		</style>
		[% END %]
	</head>
	<body>
		<div class="content">
[% END %]

<script type="text/javascript">
	// strings used for button tooltips
	[% PROCESS jsString id='NEXT' jsId='next' %]
	[% PROCESS jsString id='PREVIOUS' jsId='previous' %]
	[% PROCESS jsString id='PLAY' jsId='play' %]
	[% PROCESS jsString id='PAUSE' jsId='pause' %]
	[% PROCESS jsString id='SHUFFLE' jsId='' %]
	[% PROCESS jsString id='POWER' jsId='power' %]
	[% PROCESS jsString id='REPEAT' jsId='' %]
	[% PROCESS jsString id='VOLUME' jsId='volume' %]
	strings['volume'] += '[% "COLON" | string %]';
	[% PROCESS jsString id='VOLUME_LOUDER' jsId='volumeup' %]
	[% PROCESS jsString id='VOLUME_SOFTER' jsId='volumedown' %]
	[% PROCESS jsString id='CLOSE' jsId='close' %]
	[% PROCESS jsString id='COLLAPSE' jsId='collapse' %]
	[% PROCESS jsString id='EXPAND' jsId='expand' %]
	[% PROCESS jsString id='UNDOCK_PLAYER_PANEL' jsId='undock' %]
	[% PROCESS jsString id='BY' jsId='by' %]
	[% PROCESS jsString id='FROM' jsId='from' %]
	[% PROCESS jsString id='ON' jsId='on' %]
	[% PROCESS jsString id='OFF' jsId='off' %]
	[% PROCESS jsString id='COLON' jsId='colon' %]
	
</script>

<div id="playerbox">
	<div style="position:relative;">
		<table id="ctrlBar" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td width="50%">
					<table border="0" cellspacing="0" cellpadding="0">
						<tr>
							<td id="ctrlPrevious"></td>
							<td id="ctrlTogglePlay"></td>
							<td id="ctrlNext"></td>
							<td id="ctrlRepeat"></td>
							<td id="ctrlShuffle"></td>
						</tr>
					</table>
				</td>

				<td width="30%" align="right">
					<table border="0" cellspacing="0" cellpadding="0">
						<tr>
							<td id="ctrlVolumeDown"></td>
							<td id="ctrlVolume"><img src="[% webroot %]html/images/spacer.gif" alt="" border="0" /></td>
							<td id="ctrlVolumeUp"></td>
						</tr>
					</table>
				</td>

				<td width="25%" align="right">
					<span id="ctrlPower"></span>
				</td>

				<td><img src="[% webroot %]html/images/spacer.gif" alt="" height="10" width="5" border="0" /></td>
				<td align="right" valign="top">
					<table border="0" cellspacing="0" cellpadding="0">
						<tr><td>
							<div id="ctrlUndock" [% IF !embedded %]style="visibility:hidden"[% END %]></div>
						</td></tr>
						
						<tr><td>
							<div id="ctrlCollapse"></div>
							<div id="ctrlExpand"></div>
						</td></tr>
					</table>
				</td>
			</tr>
		</table>

		<div id="expandedPlayerPanel">
			<div id="ctrlCurrentArt">
				<img src="[% webroot %]music/0/cover_96x96_p.[% IF browserType == 'IE' %]gif[% ELSE %]png[% END %]" alt="" height="96" width="96" border="0"/>
			</div>

			<div id="ctrlCurrentSongInfo">
				<div id="ctrlCurrentTitle"></div>
				<div id="ctrlTrackInfo" class="currentTrackInfo">
					<div id="ctrlCurrentAlbum"></div>
					<div id="ctrlCurrentArtist"></div>
					<div id="ctrlBitrate"></div>
				</div>
				<div id="ctrlPlaytimePanel">
					<div id="ctrlPlaytime"></div>
					<div>
						<div id="ctrlProgress">
							<img src="html/images/spacer.gif" class="progressLeft"/><img src="html/images/spacer.gif" class="progressFillLeft"/><img src="html/images/spacer.gif" class="progressIndicator"/><img src="html/images/spacer.gif" class="progressFillRight"/><img src="html/images/spacer.gif" class="progressRight"/>
						</div>
					</div>
					<div id="ctrlPlaytimeRight">
						<span id="ctrlRemainingTime"></span>
						&nbsp;(<span id="ctrlPlayNum"></span>&nbsp;[% "OF" | string%]&nbsp;<span id="ctrlSongCount"></span>)
					</div>
				</div>
			</div>
		</div>

		<div id="collapsedPlayerPanel">
			<img src="[% webroot %]html/images/spacer.gif" class='left'>
			<img src="[% webroot %]html/images/spacer.gif" class='icon' id="nowPlayingIcon" width="10">
			<div id="ctrlCurrentSongInfoCollapsed"></div>
			<div id="ctrlPlaytimeCollapsed">09:09</div>
			<img src="[% webroot %]html/images/spacer.gif" class='right'>
		</div>
	</div>
</div>

[% IF !embedded %]
	</body>
</html>
[% END %]
