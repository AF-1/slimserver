[%- pagetitle = 'SEARCHMUSIC' | string %]
[%- pageicon = icons.SEARCHMUSIC %]
[% extJsScripts = BLOCK %]
	<script type="text/javascript">
		Ext.EventManager.onDocumentReady(function(){
			Utils.initSearch([% IF manualSearch; 'true'; END %]);

			new Ext.Button('searchButton', {
				text: '[% "SEARCH" | string %]',
				//icon: webroot + 'html/images/b_search.gif',
				//cls: 'x-btn-text-icon',
				type: 'submit',
				handler: function(){
					document.getElementById("searchForm").submit();
				}
			});
		});
	</script>
[% END %]
[% pwd_list = BLOCK %]
	<a href="search.html?player=[% playerURI %][% IF liveSearch %]&amp;livesearch=1[% END %]">[% "SEARCH" | string %]</a>
[% END %]
[% PROCESS pageheader.html dontscroll=browse_items.size %]

	<form id="searchForm" name="searchForm" method="GET" action="search.html">
		<table><tr>
			<td><input type="text" id="livesearch" name="query" size="50" value="[% query %]" autocomplete="off"/></td>
			<td><span id="searchButton"></span></td>
			<td id="advSearchLink" class="link"><a href="[% webroot %]advanced_search.html?player=[% playerid %]">[% "ADVANCEDSEARCH" | string %]</a></td>
		</tr></table>
		<input type="hidden" value="1" name="manualSearch">
		<input type="hidden" value="[% player %]" name="player">
	</form>

	<div id="browsedbHeader">
		[% IF searchError %]
			[% searchError %]
		[% END %]
		[% IF pageinfo.totalpages && pageinfo.totalpages > 1 %]
			<div class="pagerbox">
				<div class="pagerbox_top"><div></div></div>
				<div class="pagerbox_content">
					[% PROCESS pagebar %]
				</div>
				<div class="pagerbox_bottom"><div></div></div>
			</div>
		[% END %]
	</div>

	<div id="search-results">
		[% IF browse_items.size %]
			<div id="browsedbList">
	
				[% FOREACH item = browse_items %]
					[% PROCESS browsedbitems_list.html %]
				[% END %]
	
			</div>
		[% ELSIF manualSearch %]
			[% "NO_SEARCH_RESULTS" | string %]
		[% END %]
	</div>

[% PROCESS pagefooter.html %]
