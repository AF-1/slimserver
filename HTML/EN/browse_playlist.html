[% pagetitle = "SAVED_PLAYLISTS" | string %]
[% pageicon = 'SAVED_PLAYLISTS' %]
[% UNLESS noEdit; extJsScripts = BLOCK %]
	<script type="text/javascript">
		Ext.EventManager.onDocumentReady(function(){
			new Slim.Sortable({
				el: 'browsedbList',
				selector: '#browsedbList div.draggableSong',
				onDropCmd: function(sourcePos, targetPos) {
					Utils.processCommand({
						params: [ '', [
							'playlists',
							'edit',
							'playlist_id:' + [% playlist.id %],
							'cmd:move',
							'index:' + sourcePos,
							'toindex:' + targetPos
						]]
					});
				}
			})
		});
	</script>
[% END; END %]
[% IF NOT ajaxUpdate %][% PROCESS pageheader.html dontscroll=1 %]

	[% IF warn %]<p><b>[% "NOTE" | string %]</b> [% "SCAN_WARNING" | string %] <p><hr>[% END %]
	
	[% IF RENAME_WARNING %]<p><b>[% "NOTE" | string %]</b> [% "RENAME_WARNING" | string %]<p><hr>[% END %]
	[% IF DELETE_WARNING %]<p><b>[% "NOTE" | string %]</b> [% "DELETE_WARNING" | string %]<p><hr>[% END %]
	
	[% UNLESS noEdit %]
		<div class="playlistform">
		<form method="get" action="edit_playlist.html"><table><tr>
			<td>[% "NAME" | string %] <input class="stdedit" name="newname" value="[% IF newname; newname; ELSE; playlist.title; END %]" size="[% maxInputSize ? maxInputSize : 40 %]"></td>
			<td><input class="stdclick" name="submit" type=submit value="[% "SAVE" | string %]" onclick='this.form.renamePlaylist.value=1'></td>
			[% IF playlist.title %]
				<td><input class="stdclick" type="submit" value="[% "DELETE" | string %]" onclick='this.form.deletePlaylist.value=1'></td>
			[% END %]
			</tr><tr>
			<td>
				<input type="hidden" name="playlist.id" value="[% playlist.id %]">
				<input type="hidden" name="renamePlaylist" value="0">
				<input type="hidden" name="editPlaylist" value="0">
				<input type="hidden" name="deletePlaylist" value="0">
			</td>
			
			[% IF RENAME_WARNING %]<td colspan="2">
				<input align="absmiddle" type="checkbox" name="overwrite">[% "CONFIRM_OVERWRITE" | string %]</td>
			[% END %]
			[% IF DELETE_WARNING %]<td></td><td></td><td>
				<input align="absmiddle" type="checkbox" name="confirm">[% "CONFIRM_DELETE" | string %]</td>
			[% END %]
			</tr></table>
			<input type="hidden" name="dir" value="[% dir %]">
			<input type="hidden" value="[% player %]" name="player">
		</form></div>
		[% rightcontrols = 'editcontrols'; leftcontrols = 'browsecontrols' %]

		[% BLOCK editcmd %]
				href="edit_playlist.html?player=[% playerURI %]&amp;[% cmd %]=1&amp;playlist.id=[% playlist.id %]&amp;item=[% loop.count - 1 %]"
		[% END %]
		
		[% BLOCK editcontrols %]
			[% IF loop.count > 1 %]
			[% UNLESS useExtJS %]
				[%- WRAPPER moveuplink noTarget=1 %]
					[%- PROCESS editcmd cmd='up' %]
				[% END %]

				[%- WRAPPER movedownlink noTarget=1 %]
					[%- PROCESS editcmd cmd='down' %]
				[% END %]
			[% END %]
			
			[%#- WRAPPER editlink noTarget=1 %]
				[%#- PROCESS editcmd cmd='edit' %]
			[%# END %]
		
			[%- WRAPPER removelink noTarget=1 %]
				[%- PROCESS editcmd cmd='delete' %]
			[% END %]
			[% END %]
		[% END %]
	[% END %]

	<div id="browsedbHeader">
		[% IF hasPagebar %][% PROCESS pagebar %][% END %]
	</div>
[% END %] 

[% WRAPPER contentcontainer %]
	[% FOREACH item = browse_items %]
		[% addClasses = loop.index ? 'draggableSong' : '' %]
		[% PROCESS browsedbitems_list.html %]
	[% END %]
[% END %]

[% IF NOT ajaxUpdate %]
	<div id="browsedbHeader">
		[% IF hasPagebar %][% PROCESS pagebar %][% END %]
	</div>
[% PROCESS pagefooter.html %]
[% END %]
