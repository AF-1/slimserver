[% PROCESS settings/header.html %]

	<script type="text/javascript" src="/html/prototype.js"></script>
	<script type="text/javascript" src="/html/scriptaculous/scriptaculous.js"></script>
	<script type="text/javascript" src="/html/scriptaculous/effects.js"></script>

	<div class="settingSection">
	
		<div class="prefHead">[% "SETUP_GROUP_PLUGINS" | string | upper %]</div>
		<div class="prefDesc">[% "SETUP_GROUP_PLUGINS_DESC" | string %]</div>

		<p/>

		<form method="POST" action="/settings/server/plugins.html">

		[% FOREACH plugin = plugins.keys.sort %]

			[% name     = plugins.$plugin.name %]
			[% desc     = plugins.$plugin.description %]
			[% version  = plugins.$plugin.version %]
			[% settings = plugins.$plugin.optionsURL %]
			[% enabled  = plugins.$plugin.state %]

			<table>
			<tr onclick="Element.toggle('[% name %]-div'); return false;">

				<td>
					<img src="[% webroot %]html/images/extensionItem.png">
				</td>

				<td>
					&nbsp;&nbsp;<strong>[% name | string %]</strong>&nbsp;&nbsp;[% version %]<p/>
					&nbsp;&nbsp;[% desc | string %]
				</td>
			</tr>

			<tr id="[% name %]-div" style="display: none;">

				<td>&nbsp;</td>

				<td>
					[% IF settings AND enabled %]

					<input type="button" value="[% 'SETTINGS' | string %]" onClick="location.href='[% webroot %][% settings %][% IF player %]?player=[% playerURI %]&amp;playerid=[% playerURI %][% END %]'">

					[% ELSE %]

					<input type="button" value="[% 'SETTINGS' | string %]" disabled>

					[% END %]

					<!-- XXXX - need to check for pending uninstall / install -->
					[% IF enabled %]

					<input type="submit" name="[% name %].disable" value="[% 'DISABLE' | string %]">

					[% ELSE %]

					<input type="submit" name="[% name %].enable" value="[% 'ENABLE' | string %]">

					[% END %]

					<input type="submit" name="[% name %].uninstall" value="[% 'UNINSTALL' | string %]">
				</td>
			</tr>
			</table>

			<hr width="90%" /><p/>

		[%- END -%]

		</form>
		
	</div>

[% PROCESS settings/footer.html %]
