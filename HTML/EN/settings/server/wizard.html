<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>[% "SLIMSERVER" | string %]</title>

		<link rel="stylesheet" type="text/css" href="/html/ext/resources/css/ext-all.css" />
		<link rel="stylesheet" type="text/css" href="/Maestro/slim-ext.css" />
		<link rel="stylesheet" type="text/css" href="/Maestro/slimserver.css" />

		<style type="text/css">
		<!--
			html, body { background: white; }
			body { margin: 20px; }

			.wz_path {
				width: 45%;
				vertical-align:top;
			}

			#wz_formpanel {
				margin: 7px;
				position: relative;
			}

			.wz_page {
				visibility: hidden;
				position: absolute;
				width: 95%;
			}

			.wz_logo {
				float: right;
				margin-left: 30px;
			}
			
			.wz_desc_right {
				position: absolute;
				left: 55%;
				float: right;
				width: 45%;
			}
			
			#wz_musicsource td {
				vertical-align: top;
				padding-top: 5px;
			}
			
			#wz_buttonbar {
				float: right; 
				margin-top:5px; 
				margin-right:10px;
			}

			.wz_summary_list {
				list-style-type: circle;
				margin-left: 20px;
			}
		-->
		</style>
	</head>

	<body>
		<div id="loading-mask" style="width:120%;height:100%;background:white;position:absolute;z-index:20000;left:0;top:0;">&#160;</div>
		<div id="loading">
			<div class="loading-indicator">
				[% "LOADING_SLIMSERVER" | string %]
			</div>
		</div>
		<div id="noJS">[% "SETUP_NO_JAVASCRIPT" | string %]</div>
		
		<script type="text/javascript">
			document.getElementById('noJS').style.display = 'none';
			document.getElementById('loading').style.display = 'block';
		</script>

		<script type="text/javascript" src="/html/ext/adapter/ext/ext-base.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/ext/ext-all.js?r=[% revision %]"></script>

		<script type="text/javascript">
			var showproxy = [% showProxy ? "true" : "false" %];
			var showitunes = [% showiTunes ? "true" : "false" %];
			var showmusicip = [% showMusicIP ? "true" : "false" %];
			var firsttimerun = [% firstTimeRun ? "true" : "false" %];
			var wizarddone = [% wizardDone ? "true" : "false" %];
			
			var strings = new Array();
			strings['previous'] = "[% "SETUP_WIZARD_PREVIOUS" | string %]";
			strings['next'] = "[% "SETUP_WIZARD_NEXT" | string %]";
			strings['finish'] = "[% "SETUP_WIZARD_FINISH" | string %]";
			strings['close'] = "[% "SETUP_WIZARD_CLOSE" | string %]";
			strings['sn_verify'] = "[% "SETUP_WIZARD_SQN_VERIFY" | string %]";
			strings['sn_success'] = "[% "SETUP_SN_VALID_LOGIN" | string %]";

			strings['summary_none'] = "[% "NONE" | string %]";
			strings['summary_audiodir'] = "[% "SETUP_AUDIODIR" | string %][% "COLON" | string %]";
			strings['summary_itunes'] = "[% "ITUNES_DESC" | string %]";
			strings['summary_musicmagic'] = "[% "MUSICMAGIC_DESC" | string %]";
		</script>

		<script type="text/javascript" src="/html/fileselector.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/wizard.js?r=[% revision %]"></script>

		<div id="mainbody">

			<div id="header">
				<div id="header_left"></div>
				<div id="header_content"></div>
			</div>
	
			<div id="main">
				<div class="inner" id="mainpanel">
					<div class="inner_top"><div></div></div>
					<div class="inner_content" id="maincontent">

						<div class="titlebox">
							<div class="titlebox_top"><div></div></div>
							<div class="titlebox_content">
								<div id="welcome_h" class="wz_page">[% "SETUP_WIZARD_WELCOME" | string %]</div>
								<div id="proxy_h" class="wz_page">[% "SETUP_WIZARD_PROXY" | string %]</div>
								<div id="sqn_h" class="wz_page">[% "SETUP_WIZARD_SQN" | string %]</div>
								<div id="source_h" class="wz_page">[% "SETUP_WIZARD_SOURCE" | string %]</div>
								<div id="audiodir_h" class="wz_page">[% "SETUP_WIZARD_AUDIODIR" | string %]</div>
								<div id="playlistdir_h" class="wz_page">[% "SETUP_WIZARD_PLAYLISTDIR" | string %]</div>
								<div id="itunes_h" class="wz_page">[% "SETUP_WIZARD_ITUNES" | string %]</div>
								<div id="musicip_h" class="wz_page">[% "SETUP_WIZARD_MUSICIP" | string %]</div>
								<div id="summary_h" class="wz_page">[% "SETUP_WIZARD_SUMMARY" | string %]</div>
								<div id="done_h" class="wz_page">[% "SETUP_WIZARD_DONE" | string %]</div>
							</div>
							<div class="titlebox_bottom"><div></div></div>
						</div>
					
						<div id="wz_formpanel">
							<div id="welcome_m" class="wz_page">
								<div class="wz_logo"><img src="[% webroot %]html/images/squeezebox.gif"></div>
								<form name="languageForm" id="languageForm" method="post" action="[% webroot %][% path %]">
									<div>[% "SETUP_WIZARD_WELCOME_DESC" | string %]</div>
									<div><br/>
										[% "CHOOSE_A_LANGUAGE" | string %]
										<select name="language" id="language">
								
										[% FOREACH option = languageoptions %]
											<option [% IF prefs.language == option.key %]selected="selected" [% END %]value="[% option.key %]">[% option.value %]</option>
										[%- END -%]
										
										</select>
									</div>
									<input name="saveLanguage" type="hidden" value="1">
								</form>
							</div>
	
							<form name="wizardForm" id="wizardForm" method="post" action="[% webroot %][% path %]">
								<div id="proxy_m" class="wz_page">
									<div>[% "SETUP_WIZARD_PROXY_DESC" | string %]</div>
									<div>[% "SETUP_WEBPROXY_CHOOSE" | string %][% "COLON" | string %] <input type="text" name="webproxy" value="[% prefs.webproxy %]"></div>
								</div>
					
								<div id="sqn_m" class="wz_page">
									<div class="wz_logo">
<!--										<img src="[% webroot %]html/images/squeezenetwork.gif"> -->
									</div>
									
									<div>[% "SETUP_WIZARD_SQN_DESC" | string %]</div>
					
									<div><table>
										<tr>
											<td>[% "SETUP_SN_EMAIL" | string %][% "COLON" | string %]</td>
											<td><input type="text" name="sn_email" id="sn_email" value="[% prefs.sn_email %]" size="40"></td>
										</tr>
										<tr>
											<td>[% "SETUP_SN_PASSWORD" | string %][% "COLON" | string %]&nbsp;</td>
											<td><input type="password" name="sn_password" id="sn_password" value="[% prefs.sn_password %]" size="40"></td>
										</tr>
										<tr>
											<td>&nbsp;</td>
											<td><span id="sn_verify"></span></td>
										</tr>
									</table></div>
									<div id="sn_result"></div>
								</div>
					
								<div id="source_m" class="wz_page">
									<div>[% "SETUP_WIZARD_SOURCE_DESC" | string %]</div>
									<div><table id="wz_musicsource">
										<tr>
											<td><input type="checkbox" name="useAudiodir" id="useAudiodir" [% IF prefs.audiodir %]checked="checked" [% END %]>&nbsp;</td>
											<td>[% "SETUP_WIZARD_SOURCE_AUDIODIR" | string %]</td>
										</tr>
										<tr>
											<td><input type="checkbox" name="itunes" id="itunes" [% IF prefs.itunes %]checked="checked" [% END %] value="1"></td>
											<td>[% "SETUP_WIZARD_SOURCE_ITUNES" | string %]</td>
										</tr>
										<tr>
											<td><input type="checkbox" name="musicmagic" id="musicmagic" [% IF prefs.musicmagic %]checked="checked" [% END %] value="1"></td>
											<td>[% "SETUP_WIZARD_SOURCE_MUSICIP" | string %]</td>
										</tr>
									</table></div>
								</div>
					
								<div id="audiodir_m" class="wz_page">
									<div class="wz_desc_right">
										[% "SETUP_WIZARD_AUDIODIR_DESC" | string %]
										[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
									</div>
									<div id="audiodirselector"></div>
									<div>
										<input type="text" name="audiodir" id="audiodir" value="[% prefs.audiodir %]" class="wz_path">
										<span id="gotoAudiodir"></span>
									</div>
								</div>
					
								<div id="playlistdir_m" class="wz_page">
									<div class="wz_desc_right">
										[% "SETUP_WIZARD_PLAYLISTDIR_DESC" | string %]
										[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
									</div>
									<div id="playlistdirselector"></div>
									<div>
										<input type="text" name="playlistdir" id="playlistdir" value="[% prefs.playlistdir %]" class="wz_path">
										<span id="gotoPlaylistdir"></span>
									</div>
								</div>

								<div id="itunes_m" class="wz_page">
									<div>
										[% "SETUP_WIZARD_ITUNES_DESC" | string %]
										[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
									</div>
									<div id="itunespathselector"></div>
									<div>
										<input type="text" name="xml_file" id="xml_file" value="[% prefs.xml_file %]" class="wz_path">
										<span id="gotoiTunesDir"></span>
									</div>
								</div>
					
								<div id="musicip_m" class="wz_page">
									<div>[% "SETUP_WIZARD_MUSICIP_DESC" | string %]</div>
									<br/>
									<div><input type="text" name="port" id="port" value="[% prefs.port %]" size="20"></div>
									<br/>
									<div>[% "SETUP_WIZARD_MUSICIP_DESC2" | string %]</div>
									<div>[% "SETUP_WIZARD_MUSICIP_DESC3" | string %]</div>
								</div>
					
								<div id="summary_m" class="wz_page">
									<div>[% "SETUP_WIZARD_SUMMARY_DESC" | string %]</div>
									<br/>
									<div>[% "SETUP_WIZARD_SUMMARY_SQN" | string %]</div>
									<ul class="wz_summary_list">
										<li><span id="sn_email_summary"></span> <span id="sn_result_summary"></span></li>
									</ul>
									<br/>
									<div>[% "SETUP_WIZARD_SUMMARY_MUSICSOURCE" | string %][% "COLON" | string %]</div>
									<ul class="wz_summary_list" id="summary"></ul>
									<br/>
									<div>[% "SETUP_WIZARD_SUMMARY_RESCAN" | string %]</div>
								</div>
					
								[% IF firstTimeRun %]
								<input name="firstTimeRunCompleted" type="hidden" value="1">
								[% END %]
								<input name="saveSettings" type="hidden" value="1">
							</form>

							<div id="done_m" class="wz_page">
								<div>[% "SETUP_WIZARD_DONE_DESC" | string %]</div>
							</div>
						</div>
					</div>
					<div class="inner_bottom"><div></div></div>
				</div>

			</div>

			<div id="footer">
				<div id="footer_left"></div>
				<div id="footer_content">
					<table id="wz_buttonbar">
						<tr>
							<td><span id="previous"></span></td>
							<td><span id="next"></span></td>
						<tr>
					</table>
				</div>
			</div>

		</div>
	</body>
</html>