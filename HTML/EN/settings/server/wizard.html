<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>[% "SQUEEZECENTER" | string %]</title>

		<link rel="stylesheet" type="text/css" href="/html/ext/resources/css/ext-all.css" />
		<link rel="stylesheet" type="text/css" href="/Default/slim-ext.css" />
		<link rel="stylesheet" type="text/css" href="/Default/slimserver.css" />

		<style type="text/css">
		<!--
			html { background: #666666; }

			form div { cursor: default; }

			.wz_path {
				width: 50%;
				vertical-align:top;
			}

			#wz_formpanel {
				padding: 10px;
				position: relative;
			}

			.wz_page {
				position: absolute;
				width: 95%;
			}

			.wz_logo {
				float: right;
				margin-top: 60px;
				margin-left: 30px;
			}

			.wz_desc_right {
				position: absolute;
				left: 55%;
				float: right;
				width: 45%;
			}

			#wz_musicsource td {
				vertical-align: top;
				padding-top: 5px;
			}

			.wz_summary_list {
				list-style-type: circle;
				margin-left: 20px;
			}

			#language {
				position: absolute;
				top: 0px;
				right: 0px;
			}

			#loading-mask {
				width: 120%;
				height: 100%;
				background-image: url(/Default/html/images/background.png);
				position: absolute;
				z-index: 20000;
				left: 0;
				top: 0;
			}

			#loading {
				position: absolute;
				left: 40%;
				top: 40%;
				text-align: center;
				z-index: 20001;
				display: none;
			}

			#loading .loading-indicator,

			a { color: green; }

			#noJS { color: white; }
			#noJS a, #noJS a:visited { color: yellow; }
			
			.loading-indicator {
				background-image: url(/Default/html/images/loading.gif);
			}

			[% IF rtl %]
				.x-layout-panel, .x-btn,
				.x-btn-text-icon .x-btn-center .x-btn-text{
					direction: rtl
				}
				
				.x-btn-text-icon .x-btn-center .x-btn-text{
					background-position: 100% 2px;
					padding-right:18px;
					padding-left:0;
				}
				
				.x-layout-panel-hd-text{
					width:100%;
				}
				
				.x-layout-panel-hd-tools{
					left:0;
				}
				
				.x-layout-tools-button{
					float:left;
				}

				.wz_desc_right {
					left: 0;
				}

				.x-btn-left {
					background: url(/Default/html/images/slim-ext/btn-generic.png) no-repeat 0 -19px;
				}

				.x-btn-right {
					background: url(/Default/html/images/slim-ext/btn-generic.png) no-repeat 0 0;
				}

				.x-btn-over .x-btn-left, .x-btn-menu-active .x-btn-left { background-position:0 -76px; }
				.x-btn-over .x-btn-right, .x-btn-menu-active .x-btn-right { background-position:0 -57px; }
				.x-btn-click .x-btn-left, .x-btn-pressed .x-btn-left  { background-position:0 -133px; }
				.x-btn-click .x-btn-right, .x-btn-pressed .x-btn-right { background-position:0 -114px; }

			[% END %]
		-->
		</style>

		<!--[if lte IE 6]>
		<link href="/Default/ie.css?r=[% revision %]" type="text/css" rel="stylesheet">
		<![endif]-->
		<!--[if IE 7]>
		<link href="/Default/ie7.css?r=[% revision %]" type="text/css" rel="stylesheet">
		<![endif]-->
	</head>

	<body class="singlePanel">
		<img id="background" src="/Default/html/images/background.png" alt="Background" />

		<div id="loading-mask">&#160;</div>
		<div id="loading">
			<div class="loading-indicator">
				[% "LOADING_SQUEEZECENTER" | string %]
			</div>
		</div>
		<div id="noJS">[% "SETUP_NO_JAVASCRIPT" | string %]</div>

		<script type="text/javascript">
			document.getElementById('noJS').style.display = 'none';
			document.getElementById('loading').style.display = 'block';
		</script>

		<script type="text/javascript" src="/html/ext/adapter/ext/ext-base.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/ext/ext-all.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/fileselector.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/wizard.js?r=[% revision %]"></script>

		<script type="text/javascript">
			var showproxy = [% showProxy ? "true" : "false" %];
			var showitunes = [% showiTunes ? "true" : "false" %];
			var showmusicip = [% showMusicIP ? "true" : "false" %];
			var firsttimerun = [% firstTimeRun ? "true" : "false" %];
			var wizarddone = [% wizardDone ? "true" : "false" %];

			var strings = new Array();
			[% PROCESS jsString id='SETUP_WIZARD_PREVIOUS' jsId='previous' %]
			[% PROCESS jsString id='SETUP_WIZARD_NEXT' jsId='next' %]
			[% PROCESS jsString id='SETUP_WIZARD_SKIP' jsId='skip' %]
			[% PROCESS jsString id='SETUP_WIZARD_FINISH' jsId='finish' %]
			[% PROCESS jsString id='SETUP_WIZARD_CLOSE' jsId='close' %]
			[% PROCESS jsString id='SETUP_SN_VALID_LOGIN' jsId='sn_success' %]
			[% PROCESS jsString id='SETUP_SN_INVALID_LOGIN' jsId='sn_failure' %]

			[% PROCESS jsString id='NONE' jsId='summary_none' %]
			[% PROCESS jsString id='SETUP_AUDIODIR' jsId='summary_audiodir' %]
			strings['summary_audiodir'] += '[% "COLON" | string %]';
			[% PROCESS jsString id='SETUP_PLAYLISTDIR' jsId='summary_playlistdir' %]
			strings['summary_playlistdir'] += '[% "COLON" | string %]';
			[% PROCESS jsString id='ITUNES_DESC' jsId='summary_itunes' %]
			[% PROCESS jsString id='MUSICMAGIC_DESC' jsId='summary_musicmagic' %]

			Ext.EventManager.onDocumentReady(function(){
				try { Wizard.init(); }
				catch(e) {
					document.getElementById('loading').style.display = 'none';
					document.getElementById('noJS').style.display = 'block';
					[% IF !debug %]window.setTimeout(function(){location.href = '/classic'}, 10000);[% END %]
				}
			});
		</script>

		<div id="mainbody">

			<div id="header">
				<div id="header_left"></div>
				<div id="header_content">
					<span><img src="[% webroot %]html/images/spacer.gif" id="squeezeCenterLogo"></span>
					<span><a href="http://www.slimdevices.com" target="_blank"><img src="[% webroot %]html/images/spacer.gif" id="logitechLogo"></a></span>
				</div>
			</div>

			<div id="main">
				<div class="inner" id="mainpanel">
					<div class="inner_top"></div>
					<div class="inner_top_left">&nbsp;</div>
					<div class="inner_top_right">&nbsp;</div>

					<div id="inner_header">
						<div class="pagetitle">
							<div id="welcome_h" class="wz_page">[% "SETUP_WIZARD_WELCOME" | string %]</div>
							<div id="proxy_h" class="wz_page">[% "SETUP_WIZARD_PROXY" | string %]</div>
							<div id="sqn_h" class="wz_page">[% "SETUP_WIZARD_SQN" | string %]</div>
							<div id="source_h" class="wz_page">[% "SETUP_WIZARD_SOURCE" | string %]</div>
							<div id="audiodir_h" class="wz_page">[% "SETUP_WIZARD_AUDIODIR" | string %]</div>
							<div id="playlistdir_h" class="wz_page">[% "SETUP_WIZARD_PLAYLISTDIR" | string %]</div>
							<div id="itunes_h" class="wz_page">[% "SETUP_WIZARD_ITUNES" | string %]</div>
							<div id="musicip_h" class="wz_page">[% "SETUP_WIZARD_MUSICIP" | string %]</div>
							<div id="summary_h" class="wz_page">[% "SETUP_WIZARD_SUMMARY" | string %]</div>
							<div id="done_h" class="wz_page">[% "SETUP_WIZARD_DONE" | string %]</div>
						</div>
					</div>

					<div id="maincontent">

						<div id="wz_formpanel">
							<div id="welcome_m" class="wz_page">
								<div class="wz_logo"><img src="[% webroot %]html/images/squeezebox.jpg"></div>
								<div>[% "SETUP_WIZARD_WELCOME_DESC" | string %]</div>

								<form name="languageForm" id="languageForm" method="post" action="[% webroot %][% path %]">
									<select name="language" id="language">

										[% FOREACH option = languageoptions %]
											[% IF !option.value.search('\*') %]
												<option [% IF prefs.language == option.key %]selected="selected" [% preferredLanguage=1;END %]value="[% option.key %]">[% option.value %]</option>
											[% END %]
										[%- END -%]

										[% IF !preferredLanguage %]
											<option selected="selected" value="[% prefs.language %]">[% languageoptions.${prefs.language} %]</option>
										[% END %]

									</select>
									<input name="saveLanguage" type="hidden" value="1">
								</form>

							</div>

							<form name="wizardForm" id="wizardForm" method="post" action="[% webroot %][% path %]">
								<div id="proxy_m" class="wz_page">
									<div>[% "SETUP_WIZARD_PROXY_DESC" | string %]</div>
									<div>[% "SETUP_WEBPROXY_CHOOSE" | string %][% "COLON" | string %] <input type="text" name="webproxy" value="[% prefs.webproxy %]"></div>
								</div>

								<div id="sqn_m" class="wz_page">
									<div class="wz_logo"></div>

									<div>[% "SETUP_WIZARD_SQN_DESC" | string %]<br>&nbsp;</div>

									<div><table>
										<tr>
											<td>[% "SETUP_SN_EMAIL" | string %][% "COLON" | string %]</td>
											<td><input type="text" name="sn_email" id="sn_email" value="[% prefs.sn_email %]" size="40"></td>
										</tr>
										<tr>
											<td>[% "SETUP_SN_PASSWORD" | string %][% "COLON" | string %]&nbsp;</td>
											<td><input type="password" name="sn_password" id="sn_password" value="[% prefs.sn_password %]" size="40"></td>
										</tr>
										<tr>
											<td colspan="2" align="right">
												<div><a href="http://www.squeezenetwork.com/user/forgotPassword" target="SQN">[% "SETUP_SN_FORGOT_PASSWORD" | string%]</a></div>
												<div><a href="http://www.squeezenetwork.com/" target="SQN">[% "SETUP_SN_NEED_ACCOUNT" | string%]</a></div>
											</td>
										</tr>
									</table></div>
									
									<hr />
									<div>
										[% "SETUP_SN_REPORT_STATS_DESC" | string %]<br />
										<br />
										<select class="stdedit" name="sn_disable_stats" id="sn_disable_stats">
											<option [% IF !prefs.sn_disable_stats %]selected="selected" [% END %]value="0">
												[% 'SETUP_SN_REPORT_STATS_ENABLE' | string %]
											</option>
											<option [% IF prefs.sn_disable_stats == 1 %]selected="selected" [% END %]value="1">
												[% 'SETUP_SN_REPORT_STATS_DISABLE' | string %]
											</option>
										</select>
										<br />
										<br />
									</div>
									
									<div id="sn_result"></div>
								</div>

								<div id="source_m" class="wz_page">
									<div>[% "SETUP_WIZARD_SOURCE_DESC" | string %]</div>
									<div><table id="wz_musicsource">
										<tr>
											<td><input type="checkbox" name="useAudiodir" id="useAudiodir" [% IF useAudiodir %]checked="checked" [% END %]>&nbsp;</td>
											<td>[% "SETUP_WIZARD_SOURCE_AUDIODIR" | string %]</td>
										</tr>
										<tr>
											<td><input type="checkbox" name="itunes" id="itunes" [% IF prefs.itunes %]checked="checked" [% END %] value="1"></td>
											<td>[% "SETUP_WIZARD_SOURCE_ITUNES" | string %]</td>
										</tr>
										<tr>
											<td><input type="checkbox" name="musicmagic" id="musicmagic" [% IF prefs.musicmagic %]checked="checked" [% END %] value="1"></td>
											<td>[% "SETUP_WIZARD_SOURCE_MUSICIP" | string %]</td>
										</tr>
									</table></div>
								</div>

								<div id="audiodir_m" class="wz_page">
									<div class="wz_desc_right">
										[% "SETUP_WIZARD_AUDIODIR_DESC" | string %]
										[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
									</div>
									<div id="audiodirselector"></div>
									<div>
										<input type="text" name="audiodir" id="audiodir" value="[% prefs.audiodir %]" class="wz_path">
										<!-- <span id="gotoAudiodir"></span>  -->
									</div>
								</div>

								<div id="playlistdir_m" class="wz_page">
									<div class="wz_desc_right">
										[% "SETUP_WIZARD_PLAYLISTDIR_DESC" | string %]
										[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
									</div>
									<div id="playlistdirselector"></div>
									<div>
										<input type="text" name="playlistdir" id="playlistdir" value="[% prefs.playlistdir %]" class="wz_path">
										<!-- <span id="gotoPlaylistdir"></span> -->
									</div>
								</div>

								<div id="itunes_m" class="wz_page">
									<div class="wz_desc_right">
										[% "SETUP_WIZARD_ITUNES_DESC" | string %]
										[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
									</div>
									<div id="itunespathselector"></div>
									<div>
										<input type="text" name="xml_file" id="xml_file" value="[% prefs.xml_file %]" class="wz_path">
										<!-- <span id="gotoiTunesDir"></span> -->
									</div>
								</div>

								<div id="musicip_m" class="wz_page">
									<div>[% "SETUP_WIZARD_MUSICIP_DESC" | string %]</div>
									<br/>
									<div><input type="text" name="port" id="port" value="[% prefs.port %]" size="20"></div>
									<br/>
									<div>[% "SETUP_WIZARD_MUSICIP_DESC2" | string %]</div>
									<div>[% "SETUP_WIZARD_MUSICIP_DESC3" | string %]</div>
								</div>

								<div id="summary_m" class="wz_page">
									<div>[% "SETUP_WIZARD_SUMMARY_DESC" | string %]</div>
									<br/>

									<div>[% "SETUP_WIZARD_SUMMARY_SQN" | string %]</div>
									<ul class="wz_summary_list">
										<li><span id="sn_email_summary"></span> <span id="sn_result_summary"></span></li>
									</ul>
									<br/>

									<div>[% "SETUP_WIZARD_SUMMARY_MUSICSOURCE" | string %][% "COLON" | string %]</div>
									<ul class="wz_summary_list" id="summary"></ul>
									<br/>

									<div>[% "SETUP_WIZARD_SUMMARY_RESCAN" | string %]</div>
								</div>

								[% IF firstTimeRun %]
								<input name="firstTimeRunCompleted" type="hidden" value="1">
								[% END %]
								<input name="saveSettings" type="hidden" value="1">
							</form>

							<div id="done_m" class="wz_page">
								<div>[% "SETUP_WIZARD_DONE_DESC" | string %]</div>
							</div>

						</div>
					</div>

					<div id="infoTab" class="buttonbar">
						<table id="buttonbar">
							<tr>
								<td><span id="previous"></span></td>
								<td><span id="next"></span></td>
							<tr>
						</table>
					</div>

					<div class="inner_bottom"></div>
					<div class="inner_bottom_left">&nbsp;</div>
					<div class="inner_bottom_right">&nbsp;</div>

				</div>

			</div>

			<div id="footer">
				<div id="footer_left"></div>
				<div id="footer_content">
				</div>
			</div>

		</div>
	</body>
</html>