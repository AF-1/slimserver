[% pageHeaderScripts = BLOCK %]
	<script TYPE="text/javascript">[% PROCESS html/vars.js %]</script>
	<script TYPE="text/javascript">
		timestring     = "[% 'TOTAL_TIME' | string %]";
		progressbarlen = "[% barlen %]";
		progresstype   = "[% type %]";
	</script>
	<script type="text/javascript" src="[% webroot %]html/prototype.js?r=[% revision %]" ></script>
	<script TYPE="text/javascript" src="[% webroot %]html/global.js?r=[% revision %]"></script>
	<script TYPE="text/javascript" src="[% webroot %]html/common.js?r=[% revision %]"></script>
	<script TYPE="text/javascript" src="[% webroot %]html/progress.js?r=[% revision %]"></script>
[% END %]
[% bodyscript = 'onload="ajaxProgressRefresh();"' %]

[% extJsScripts = BLOCK %]
	<script TYPE="text/javascript" src="[% webroot %]html/progress.js?r=[% revision %]"></script>
	<script TYPE="text/javascript">
		var timestring = '';
		progressbarlen = '40';
		progresstype   = 'importer';

		Ext.onReady(function(){
			SqueezeJS.UI.ScannerInfoExtended.init({
				onUpdate: function(result){
					if (result) {
						if (result.scans && !(result.message || result.total_time)) {
							var el = Ext.get('library');
							if (el && el.isVisible()) {
								el.setDisplayed('none');
							}
						}
					}
					console.debug(result);
				}
			});
		}, SqueezeJS.UI.ScannerInfoExtended, true);
	</script>
[% END %]

[% PROCESS settings/header.html %]

[% WRAPPER setting title="SERVER_STATUS" %]
	<div class="prefDesc">[% "SERVER_STATUS_DESC" | string %]</div>
[% END %]

<div id="library">
[% WRAPPER setting title="INFORMATION_MENU_LIBRARY" %]
	[% FOREACH item IN library %]
		<p>[% item.items.0 | string %][% "COLON" | string %] [% item.items.1 %]</p>
	[% END %]
[% END %]
</div>
		
[% IF progress %]
	[% WRAPPER setting title="SCANNER_PROGRESS" %]
		[% progress %]
	[% END %]
[% END %]

[% WRAPPER setting title="INFORMATION_MENU_SERVER" %]
	[% IF versionInfoString %]
		<p>[% versionInfoString %]</p>
	[% END %]

	[% FOREACH item IN server %]
		[% IF item.items.1 %]
			<p>[% item.items.0 | string %][% "COLON" | string %] [% item.items.1 %]</p>
		[% END %]
	[% END %]
[% END %]
		
[% IF clients %]
	[% WRAPPER setting title="INFORMATION_MENU_PLAYER" %]
		[% FOREACH client = clients %]
		<div style="padding-bottom: 10px;">
			[% FOREACH item IN client.value %]
				[% IF item.items.1  %]
				<p>[% item.items.0 | string %][% "COLON" | string %] [% item.items.1 %]</p>
				[% END %]
			[% END %]
		</div>
		[% END %]
	[% END %]
[% END %]
	
[% IF controllers %]
	[% WRAPPER setting title="INFORMATION_MENU_CONTROLLER" %]
		[% FOREACH controller = controllers %]
		[% END %]
	[% END %]
[% END %]

[% FOREACH item IN folders %]
	[% IF item.items.1 %]
		[% WRAPPER settingSection %]
			<div class="settingGroup">
				<div class="prefHead">[% item.items.0 | string %]</div>
				<div class="prefs">[% item.items.1 %]</div>
			</div>
		[% END %]
	[% END %]
[% END %]

[% FOREACH item IN logs %]
	[% IF item.items.1 %]
		[% WRAPPER setting title="SETUP_DEBUG_${item.items.0}_LOG" desc="SETUP_DEBUG_${item.items.0}_LOG_DESC" %]
			<div class="prefDesc">
				<a href="/[% item.items.0 | lower %].log" target="log">[% item.items.1 %]</a>
				(<a href="/[% item.items.0 | lower %].log?lines=100" target="log">100</a>,
				<a href="/[% item.items.0 | lower %].log?lines=500" target="log">500</a>,
				<a href="/[% item.items.0 | lower %].log?lines=1000" target="log">1000</a>
				[% "LINES" | string %])
			</div>
		[% END %]
	[% END %]
[% END %]

[% PROCESS settings/footer.html %]
