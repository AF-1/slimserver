[% PROCESS pageheader.html pageicon='SongInfo' %]

<p id="pagetitle">
 <a onclick="parent.browseurl('home.html?')">[% "HOME" | string %]</a> /
 [% "SONG_INFO" | string; " "; "FOR" | string %]
 <a class="fakelink" onclick="browseurl('songinfo.html?item=[% item %]')">
 <i>[% track.title | html %]</i></a> 
</p>

<p>
 <a onclick="parent.updateStatusCombined(&quot;&amp;command=playlist&amp;subcommand=loadtracks&amp;track=[%item%]&quot;)"
  class="fakelink">[% "PLAY_THIS_SONG" | string %]</a>
</p>
<p>
 <a onclick="parent.updateStatusCombined(&quot;&amp;command=playlist&amp;subcommand=addtracks&amp;track=[%item%]&quot;)"
   class="fakelink">[% "ADD_THIS_SONG_TO_PLAYLIST" | string %]</a>
</p>

<table class="songinfotable">
 <tr>
  <td class="fc"> [% "TITLE" | string %][% "COLON" | string %] </td>
  <td> [% track.title | html %] </td>
 </tr>

 [% FOREACH role = track.contributorRoles.sort %]
  [% contributors = track.contributorsOfType(role) %]
  [% IF contributors %]
 <tr>
  <td class="fc"> [% role | upper | string %][% "COLON" | string %] </td>
  <td>
   [% FOREACH contributor = contributors.sort %]
    <a onclick="parent.browseurl('browsedb.html?hierarchy=artist,album,track&level=1&artist=[%contributor.id%]')">[% contributor.name | html %]</a>
   [% END %]
  </td>
 </tr>
  [% END %]
 [% END %]

 [% IF track.album %] 
 <tr>
  <td class="fc"> [% "ALBUM" | string %] </td>
  <td>
   <a onclick="parent.browseurl('browsedb.html?hierarchy=album,track&level=1&album=[% track.album.id %]')">[% track.album.title | html %]</a>
  </td>
 </tr>
 [% END %]

 [% IF track.genres %]
 <tr>
  <td class="fc"> [% "GENRE" | string %][% "COLON" | string %] </td>
  <td>
   [% FOREACH genre = track.genres %]
    <a onclick="parent.browseurl('browsedb.html?hierarchy=genre,artist,album,track&level=1&genre=[% genre.id %]')">[% genre.name | html %]</a>
   [% END %]
  </td>
 </tr>
 [% END %]

 [% IF track.tracknum %] 
 <tr>
  <td class="fc"> [% "TRACK" | string %][% "COLON" | string %] </td>
  <td> [% track.tracknum | html %] </td>
 </tr>
 [% END %]

 [% IF track.content_type %] 
 <tr>
  <td class="fc"> [% "TYPE" | string %][% "COLON" | string %] </td>
  <td> [% track.content_type | string %] </td>
 </tr>
 [% END %]

 [% IF track.duration %] 
 <tr>
  <td class="fc"> [% "LENGTH" | string %][% "COLON" | string %] </td>
  <td> [% track.duration | html %] </td>
 </tr>
 [% END %]

 [% IF track.year %] 
 <tr>
  <td class="fc"> [% "YEAR" | string %][% "COLON" | string %] </td>
  <td> [% track.year | html %] </td>
 </tr>
 [% END %]

 [% IF track.replay_gain %] 
  <tr> 
	<td class="fc"> [% "REPLAYGAIN" | string; "COLON" | string %]</td>
	<td> [% track.replay_gain | format('%2.2f') | html %] dB</td>
  </tr>
 [% END %]

 [% IF track.album.replay_gain %] 
  <tr> 
	<td class="fc"> [% "ALBUMREPLAYGAIN" | string; "COLON" | string %]</td>
	<td> [% track.album.replay_gain | format('%2.2f') | html %] dB</td>
  </tr>
 [% END %]

 [% IF comment %] 
 <tr>
  <td class="fc"> [% "COMMENT" | string %][% "COLON" | string %] </td>
  <td> [% comment | html %] </td>
 </tr>
 [% END %]

[% IF track.lyrics %] 
 <tr>
  <td class="fc"> [% "LYRICS" | string %][% "COLON" | string %] </td>
  <td> [% track.lyrics | html %] </td>
 </tr>
 [% END %]

 [% IF filelength %] 
 <tr>
  <td class="fc"> [% "FILELENGTH" | string %][% "COLON" | string %] </td>
  <td> [% filelength | html %] [% "BYTES" | string %] </td>
 </tr>
 [% END %]

 [% IF track.bitrate %] 
 <tr>
  <td class="fc"> [% "BITRATE" | string %][% "COLON" | string %] </td>
  <td> [% track.bitrate | html %] </td>
 </tr>
 [% END %]

 [% IF track.tagversion %] 
 <tr>
  <td class="fc"> [% "TAGVERSION" | string %][% "COLON" | string %] </td>
  <td> [% track.tagversion | html %] </td>
 </tr>
 [% END %]

 [% IF track.path %] 
 <tr>
  <td class="fc"> [% "LOCATION" | string %][% "COLON" | string %] </td>
  <td> [% track.path | unuri | utf8decode | html %] <a href="[% download %]">([% "DOWNLOAD" | string %])</a> </td>
 </tr>
 [% END %]

 [% IF track.modificationTime %] 
 <tr>
  <td class="fc"> [% "MODTIME" | string %][% "COLON" | string %] </td>
  <td> [% track.modificationTime | html %] </td>
 </tr>
 [% END %]

 [% IF track.coverArt('cover', 1) %] 
 <tr>
  <td class="fc" valign="top">[% "COVERART" | string %]</td>
  <td>
   <a href="/music/[% track.id %]/cover.jpg" target="cover"><img src="/music/[% track.id | uri %]/cover.jpg"></a>
  </td>
 </tr>
 [% END %]
</table>

</body>
</html>
