[%- IF ajaxRequest -%]
	<pre>
	[% PROCESS ajaxRequest.txt page = 'status' %][% PROCESS FBajaxRequest.txt page = 'status' %]
	</pre>
[%- ELSE -%]
[%- FILTER null %]

[% BLOCK spacer -%]
<img src="[% webroot %]html/images/spacer.gif" width="0">
[%- END %]

[% BLOCK volumectl %]
[% IF undock %]
<a class="volfragment" href="javascript:processVolume('p0=mixer&amp;p1=volume&amp;p2=[% vol %]&amp;player=[% playerURI %]');">[% PROCESS spacer %]</a>
[% ELSE %]
<a class="volfragment" href="[% statusroot %]?p0=mixer&amp;p1=volume&amp;p2=[% vol %]&amp;player=[% playerURI %]">[% PROCESS spacer %]</a>
[% END %]
[% END %]

[%- BLOCK volumecontrol %]
	[% vols = {
			'2' => '0', '4' => '6', '6' => '12', '8' => '18',
			'10' => '24', '12' => '30', '14' => '36', '16' => '42', '18' => '48',
			'20' => '54', '22' => '60', '24' => '66', '26' => '72', '28' => '78',
			'30' => '84', '32' => '90', '34' => '95', '36' => '100',
		}
	%]
	[%- FOREACH level = vols.nsort.reverse %]
	<div id="volumeBar[% level %]" class="volumeBar">
		<div style="height: [% 37-level %]px;">[% PROCESS volumectl vol = vols.$level %]</div>
		<div id="volDiv[% level %]" style="height: [% level %]px;background-color: [% IF volume < vols.$level %]#808080[% ELSE %]#00C000[% END %];">[% PROCESS volumectl vol = vols.$level %]</div>
	</div>
	<div class="volumeSpacer">
		[% PROCESS volumectl vol = vols.$level %]
	</div>
	[%- END -%]
[% END -%]

[% BLOCK statectrl %]
	[% IF undock %]
	<a id="[% item %][% IF item == 'playlist' %][% command %][% END %][% loop.index %]" class="[% IF not condition %]dark[% END %]button" href="javascript:processState('p0=[% item || 'playlist' %]&amp;p1=[% command %]&amp;p2=[% arg %]&amp;player=[% playerURI %]');"><b>[% cmdstring | string | upper%]</b></a>
	[% ELSE %]
	<a class="[% IF not condition %]dark[% END %]button" href="[% statusroot %]?p0=[% item || 'playlist' %]&amp;p1=[% command %]&amp;p2=[% arg %]&amp;player=[% playerURI %]"><b>[% cmdstring | string | upper%]</b></a>
	[% END %]
[% END %]

[% BLOCK playctl %]
	<td>
		[% IF undock %]
			<a href="javascript:processPlayControls('[% command %]&amp;player=[% playerURI %]')">
			<img id="playCtl[% img %]" valign="bottom" class="gray" src="[% webroot %]html/images/[% img %][% IF condition %]_s[% END %].gif" border="1" width="[% width || 30 %]" height="[% height || 19 %]"><img id="playCtl[% img %]tan" class="tan" src="[% webroot %]html/images/[% img %][% IF condition %]_s[% END %]_tan.gif" width="[% width %]" height="[% height %]"></a>
		[% ELSE %]
			<a href="[% statusroot %]?[% command %]&amp;player=[% playerURI %]">
			<img valign="bottom" class="gray" src="[% webroot %]html/images/[% img %][% IF condition %]_s[% END %].gif" border="1" width="[% width || 30 %]" height="[% height || 19 %]"><img class="tan" src="[% webroot %]html/images/[% img %][% IF condition %]_s[% END %]_tan.gif" width="[% width %]" height="[% height %]"></a>
		[% END %]
	</td>
[% END %]

[% BLOCK remove %]
	<a class="label" href="[% statusroot %]?p0=playlist&amp;p1=deletealbum&amp;p4=[% item| uri %]&amp;player=[% playerURI %]" title='[% "REMOVE_FROM_PLAYLIST" | string %]'>[x]</a>
[% END %]

[% END -%]
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	[% pagetitle = player_name %]
	[% PROCESS customheader.html %]
	[%- IF undock -%]<script TYPE="text/javascript" language="JavaScript">[% PROCESS html/ajax.js %]</script>[% END %]
	[% IF playercount == '0' %]<script TYPE="text/javascript" language="JavaScript">
		<!--Hide
		[% IF undock %]self.close();[% ELSE %]
		location="status.html";[% END %]
		-->
	</script>[% END %]
</head>
<body bgcolor="#FFFFFF" style="margin: 0" topmargin="0" leftmargin="0" rightmargin="0" [% IF not undock %]onload="javascript:doLoad();"[% END %]>
	<div ID="header">
		<div id="mastHead">
			<div id="playerlogo">
				<img class="gray" src="[% webroot %]html/images/[% playermodel %]_logo.small.gif" width="98" height="17">
				<img class="tan" src="[% webroot %]html/images/squeezebox_logo.small_tan.gif" width="98" height="17">
			</div>
			<div id="playerlinks">
			[% IF undock %]<span id="inc"></span>  [% END %]
				[% IF sync %]
					<a href="[% statusroot %]?p0=sync&p1=-&player=[% playerURI %]">[% "UNSYNC" | string %]</a>
					 / 
				[% END %]
				[% IF mode != 'off' %]
					<A href="[% statusroot %]?p0=button&amp;p1=sleep&amp;player=[% playerURI %]">Sleep</a>[% IF sleeptime %] ([% sleep %])[% END %]
				[% END %][% IF mode != 'off' %] / [% END %]
				[% IF not nosetup  %]<a href="setup.html?page=PLAYER_SETTINGS&amp;player=[% playerURI %]&amp;playerid=[% playerURI %]" target="browser">[% "SETTINGS" | string %]</a>
				[%- END -%]
				[%- IF not undock -%] /
				<a href="javascript:openRemote('[% playerURI %]','[% player_name %]')">Undock</a>
				<img id="statusImg_up" src="html/images/b_up.gif" onClick="toggleStatus(['TopMenu1','TopMenu2','TopMenu3']);resizePlaylist();">
				<img id="statusImg_down" style="display:none;" src="html/images/b_down.gif" onClick="toggleStatus(['TopMenu1','TopMenu2','TopMenu3']);resizePlaylist();">
				[%- END %]
			</div>
		</div>

[%- IF NOT undock -%]
		<div id="menuHeader">
			<form id="playerForm" action="">
				[% IF player_chooser_list -%]
					<select name="player" onchange="changePlayer(this);" class="stdedit">[% player_chooser_list %]</select>
				[%- ELSE -%]
					[% IF player_name -%]<span class="songtitle">[% player_name %]</span>[%- END -%]
					[%- IF sync %][% "SYNCHRONIZED_WITH" | string %] [% sync %][% END -%]
				[%- END %]
			</form>
		</div>
[% END %]

		<script TYPE="text/javascript" language="JavaScript">
		<!--
		if (document.all||document.getElementById)
			insertProgressBar([% IF modeplay %]1[% ELSE %]0[% END %],[% IF durationseconds %][% durationseconds %][% ELSE %][% refresh %][% END %],[% IF songtime %][% songtime %][% ELSE %]0[% END %]);
		else
			window.onload=insertProgressBar([% IF modeplay %]1[% ELSE %]0[% END %],[% IF durationseconds %][% durationseconds %][% ELSE %][% refresh %][% END %],[% IF songtime %][% songtime %][% ELSE %]0[% END %]);
		-->
		</script>	
		<div id="TopMenu1">
			<div id="coverart">
				[% IF coverThumb -%]
					<a [% albumHRef %] target="browser" id="coverhref">[% PROCESS statusImg width="100" %]</a>
				[% ELSE -%]
					<img src="[% webroot %]html/images/cover.png" id="coverartpath" width = '100' height="100">
				[%- END %]
			</div>
			<div id="notplaying" style="display:none";>
			[% "PLAYLIST_EMPTY" | string %]
			</div>
			<div id="nowplaying">
				<div class="label">[% IF modeplay  %][% status = "PLAYING"    %][% END %]
				[% IF modepause %][% status = "PAUSED_ON"  %][% END %]
				[% IF modestop  %][% status = "STOPPED_ON" %][% END %]
				<span id="playtextmode">[% IF currentsong %][% status | string %][% ELSE %][% "PLAYLIST_EMPTY" | string %][% END %]</span>
				[% IF currentsong %]<b><span id="thissongnum">[% currentsong %]</span></b> [% "OUT_OF" | string %] <b>&nbsp;<span id="songcount">[% songcount %]</span></b>&nbsp;<a id="zaphref" class="label" href="[% statusroot %]?p0=playlist&amp;p1=zap&amp;p2=[% thissongnum %]&amp;player=[% playerURI %]" title='Move to Zapped playlist'>[zap]</a>[% END %][% "COLON" | string %]</div>
				<div id="songtitlehref" class="currentSongData"><a class="songtitle" [% songinfoHRef %] target="browser"><span id="songtitle">[% songtitle %]</span></a>
				[% IF itemobj.duration %]&nbsp;<span id="duration">([% itemobj.duration | html %])</span>[% END %][% IF bitrate %]&nbsp;<span id="bitrate">([% bitrate %])</span>[% END %]</div>
				
				[% IF itemobj.artist && itemobj.artist != noArtist %]<div id="artistinfo" class="label">[% "ARTIST" | string %]&nbsp;<span id="removeartisthref">[% PROCESS remove item=itemobj.artist %]</span></div>
				<span id="artisthtml">[% PROCESS artistsAsHTML.html noby=1 %]</span>
				[% END %]
				
				[% IF itemobj.album.title && itemobj.album.title != noAlbum %]<div id="albuminfo" class="label">[% "ALBUM" | string %]&nbsp;<span id="removealbumhref">[% PROCESS remove item=itemobj.album.title %]</span></div>
				<span id="albumhref"><a [% albumHRef %] target="browser"><span id="album">[% itemobj.album.title | html %]</span></a>[% IF itemobj.year %]&nbsp;<span id="year">([% itemobj.year %])</span>[% END %]</span>

				[% END %]
			</div>
		</div>
	
		<div id="TopMenu2">
			<div id="playControls">
				<table><tr valign="bottom">
						[% PROCESS playctl command='p0=play' img='play' width='42' height='43' condition=modeplay && rate == 'norm' -%]
						[% PROCESS playctl command='p0=stop' img='stop' width='23' height='32' condition=modestop -%]
					<td><table  align="bottom">
						<tr>[% IF isplayer %]
								[% PROCESS playctl command='p0=button&amp;p1=rew.hold' width='30' height='19' img='rew' condition=rate == 'rew' -%]
								[% PROCESS playctl command='p0=button&amp;p1=fwd.hold' img='ffwd' condition=rate == 'ffwd' -%]
						</tr><tr>[% END -%]
								[% PROCESS playctl command='p0=playlist&amp;p1=jump&amp;p2=-1' width='30' height='19' img='back' condition='0' -%]
								[% PROCESS playctl command='p0=playlist&amp;p1=jump&amp;p2=%2b1' img='forward' condition='0' -%]
								[% PROCESS playctl command='p0=pause' img='pause' condition=modepause -%]
							[% IF isplayer %]
								[% PROCESS playctl command='p0=button&amp;p1=muting' img='mute' condition=mute -%]
							[% END -%]
						</tr>
					</table></td>
			</tr></table></div>
			[% IF isplayer and not fixedVolume %]
			<div id="volumeControl"><div class="volwidth">
				[% PROCESS volumecontrol %]
				<div id="volumeBarText">
					<div class="attributeBold">[% "VOLUME" | string | upper%][% "COLON" | string %]</div>
				</div>
			</div></div>
			[% END %]
		</div>
		
		<div id="TopMenu3">
			<div id="repeatButtons">
					<div class="attributeBold">[% "REPEAT" | string | upper%][% "COLON" | string %]</div>
					[% FOREACH type = ['off','one','all'] %]
						[% PROCESS statectrl item = 'playlist' condition=repeat == loop.index command='repeat' arg=loop.index cmdstring=type %]
					[% END %]
			</div>
			
			<div id="powerButtons">
					<div class="attributeBold">[% "POWER" | string | upper%][% "COLON" | string %]</div>
					[% FOREACH type = ['on','off'] %]
						[% PROCESS statectrl condition=mode == type item='power' command=1-loop.index arg='' cmdstring=type %]
					[% END %]
			</div>
			
			<div id="shuffleButtons">
					<div class="attributeBold">[% "SHUFFLE" | string | upper%][% "COLON" | string %]</div>
					[% FOREACH type = ['off','song','album'] %]
						[% PROCESS statectrl condition=shuffle == loop.index item = 'playlist' command='shuffle' arg=loop.index cmdstring=type %]
					[% END %]
			</div>
		</div>

[% IF NOT undock %]	
		<div id="playlistStatus">
			<div id="currentPlaylist">
				[% "CURRENT_PLAYLIST" | string %][% "COLON" | string %]
				[% IF current_playlist %][% current_playlist_name %]
				([% IF myClientState; myClientState.playlist.size; END; %] [% "SONGS" | string %])[% IF current_playlist_modified %]([% "MODIFIED" | string %])[% END %][% END %]
			</div>
			<div id="playlistLinks">
				[% img = '' %][% IF cansave %][% PROCESS savePlaylistLink %] / [% END %]
				[% PROCESS downloadPlaylistLink %] /
				[% PROCESS clearPlaylistLink %]
			</div>
		</div>

		<div id="playlistframe">
			<IFRAME name="playlist" id="playlist" onload="resizePlaylist();" onresize="resizePlaylist();" src="playlist.html?player=[% playerURI %]" frameborder="no"></IFRAME>
		</div>
[% END %]
[% PROCESS pagefooter.html %]
[% END %]