[% pagetitle = 'Search' %]
[% pageicon = 'Search' %]
[% bodyscript = 'onload="document.searchForm.query.focus();"' %]
<html>
	<head>
		<title>[% pagetitle %]</title>
		<link rel="stylesheet" href="[% webroot %]slimserver.css">
	</head>
	<body bgcolor="#FFFFFF" marginwidth="0" marginheight="0" topmargin="0" leftmargin="0" [% IF setup || help %]onload="top.document.getElementById('home').rows = ' 0 , *';"[% END %]>

[% MACRO logicalSelectionBlock BLOCK %]

	<select name="[% name %]">
		<option value="=" >[% "EQUALS" | string %]</option>
		<option value="&lt;" >[% "LESSTHAN" | string %]</option>
		<option value="&gt;" >[% "GREATERTHAN" | string %]</option>
		<option value="!=" >[% "NOT" | string %]</option>
	</select>

[% END %]

[% MACRO timeSelectionBlock BLOCK %]

	<select name="[% name %]">
		<option value="=" >[% "IS" | string %]</option>
		<option value="&lt;" >[% "BEFORE" | string %]</option>
		<option value="&gt;" >[% "AFTER" | string %]</option>
	</select>

[% END %]


<TR height="1"> 
  <TD width="4" height="1"><IMG SRC="html/images/spacer.gif" WIDTH=8 HEIGHT=1 ALT=""></TD>
				<td valign="top" class="medgrey" height="44">
					<table cellspacing="0" width=100% >
						<tr height="5">
							<td width="8" height="5"><img src="html/images/spacer.gif" width=8 height=5 alt=""></td>
							<td height="5"><img src="html/images/spacer.gif" width=305 height=5 alt=""></td>
							<td width="4" height="5"><img src="html/images/spacer.gif" width=4 height=5 alt=""></td>
						</tr>
						<tr>
							<td width="8"><img src="html/images/spacer.gif" width=8 height=8 alt=""></td>
							
        <td class="exlisting" valign=top><a href="[% webroot %]home.html?player=[% player | uri %]" target="header">[% "HOME" | string %]</a> / <a href="advanced_search.html?player=[% player | uri %]">[% "ADVANCEDSEARCH" | string %]</a></td>
							<td width="4"></td>
						</tr>
						<tr height="5">
							<td width="8" height="5"><img src="html/images/spacer.gif" width=8 height=5 alt=""></td>
							<td height="5"><img src="html/images/spacer.gif" width=305 height=5 alt=""></td>
							<td width="4" height="5"></td>
						</tr>
					</table>
				</td>
				<TD width="4" height="10">
			<p><IMG SRC="html/images/spacer.gif" WIDTH=4 HEIGHT=1 ALT=""></p></TD>
			</TR>
	</table>


	<div align="center">
		<table class="border" border="0" cellpadding="3" cellspacing="1" width="100%">
		<form action="advanced_search.html" method="GET" name="searchForm">
		<input type="hidden" value="[% player %]" name="player">
		<tbody>

			<tr>
				<td class="content" align="right" valign="middle" width="30%">[% "TRACK" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">
					<input name="search.track_title" value="[% search.track_title.value %]" size="35" maxlength="100" type="text">
				</td>
			</tr>

			<tr>
				<td class="content" align="right" valign="middle" width="30%">[% "ARTIST" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">
				  <input name="search.contributor_name" value="[% search.contributor_name.value %]" size="35" maxlength="100" type="text">
				</td>
			</tr>

			<tr>
				<td class="content" align="right" valign="middle" width="30%">[% "ALBUM" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">
				  <input name="search.album_title" value="[% search.album_title.value %]" size="35" maxlength="100" type="text">
				</td>
			</tr>

			<tr>
				<td class="content" align="right" valign="middle" width="30%">[% "GENRE" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					<select name="search.genre">
						<option value="">[% "ANY_GENRE" | string %]</option>

						[% FOREACH genre = genres %]

							[% NEXT IF NOT genre.name OR genre.id == 1 %]

							<option value="[% genre.id %]" [% IF search.genre.value == genre.id %]selected[% END %]>[% genre.name %]</option>

						[% END %]
					</select>
				</td>
			</tr>

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "LENGTH" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					[% logicalSelectionBlock(name='search.secs.op') %]

					<input name="search.secs" value="[% search.secs.value %]" size="4" maxlength="4" style="text-align: right;" type="text">
					[% "SECONDS" | string %]
				</td>
			</tr>

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "TRACK" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					[% logicalSelectionBlock(name='search.tracknum.op') %]

					<input name="search.tracknum" value="[% search.tracknum.value %]" size="3" maxlength="3" style="text-align: right;" type="text">
				</td>
			</tr>

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "YEAR" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					[% timeSelectionBlock(name='search.year.op') %]

					<input name="search.year" value="[% search.year.value %]" size="4" maxlength="4" style="text-align: right;" type="text">
				</td>
			</tr>

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "MODTIME" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					[% timeSelectionBlock(name='search.age.op') %]

					<input name="search.age" value="[% search.age.value %]" size="10" maxlength="10" type="text">
					&nbsp; ex: [% dateFormat %]
				</td>
			</tr>

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "BITRATE" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					[% logicalSelectionBlock(name='search.bitrate.op') %]

					<select name="search.bitrate">
						<option value="">[% "ANY_VALUE" | string %]</option>

						[% FOREACH bitRate = [ 32 40 48 56 64 80 96 112 128 160 192 224 256 320 ] %]
							<option value="[% bitRate %]" [% IF search.bitrate.value == (bitRate * 100) %]selected[% END %]>[% bitRate %]</option>
						[% END %]

					</select> [% "KBPS" | string %]
				</td>
			</tr>

<!--
			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">Sample Rate&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					[% logicalSelectionBlock(name='search.samplerate.op') %]

					<select name="search.samplerate">
						<option value="">[% "ANY_VALUE" | string %]</option>

						[% FOREACH sampleRate = [ 32000 44100 ] %]
							<option value="[% sampleRate %]">[% sampleRate %]</option>
						[% END %]
					</select> kHz
				</td>
			</tr>
-->

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "TYPE" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					<select name="search.ct">
						<option value="">[% "ANY_TYPE" | string %]</option>

						[% FOREACH type = fileTypes.keys %]
							<option value="[% type %]" [% IF search.ct.value == type %]selected[% END %]>[% fileTypes.$type %]</option>
						[% END %]
					</select>
				</td>
			</tr>

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "FILELENGTH" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">

					[% logicalSelectionBlock(name='search.size.op') %]

					<input name="search.size" value="[% search.size.value %]" size="12" maxlength="12" style="text-align: right;" type="text">
					[% "BYTES" | string %]
				</td>
			</tr>
<!-- 
	Not yet.

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "COMMENT" | string %]&nbsp;</td>
				<td class="content" align="left" valign="middle" width="70%">
					<input name="search.comments" value="" size="35" maxlength="1000" type="text">
				</td>
			</tr>

			<tr>
				<td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">Lyrics</td>
				<td class="content" align="left" valign="middle" width="70%">
				  <input name="search.lyrics" value="" size="35" maxlength="1000" type="text">
				</td>
			</tr>
-->

			<tr>
				<td colspan="2" class="content" align="center" valign="middle">
					<br>
					<input value="[% "SEARCH" | string %]" type="submit" class="stdclick">
					<input value="[% "CLEAR"  | string %]" type="reset" class="stdclick">
				</td>
			</tr>
		
		</tbody></table>
	<div>

	<p>
	[% IF numresults != '-1' %]
		<hr>
		<p>[% "SONGSMATCHING" | string %] [% "COLON" | string %][% numresults %]</p>
		<p>
	[% END %]

	[% IF searchlist_pagebar %]
		<p>[% "PAGES" | string %][% "COLON" | string %][% searchlist_pagebar %]</p>
	[% END %]

	[% IF searchlist_header %]
		<p>[% searchlist_header %][% "COLON" | string %]</p>
	[% END %]
	
	[% IF numresults != '-1' %]<table cellpadding="0" cellspacing="0" border="0" width="100%">
		<tr>
			<td class="listing">&nbsp;
				[% "THIS_ENTIRE_PLAYLIST" | string %]
			</td>
			<td class="listing" width="11" align="center">&nbsp;</td>
			<td  class="listing" width="3" align="center">&nbsp;</td>
			<td class="listing" width="11" align="center">
				<nobr><a href="[% webroot %]status_header.html?player=[% player | uri %]&command=playlist&sub=playtracks&listref=searchResults"  target="status"><img src="html/play.this.gif" border=0 align="center" width="5" height="9" alt='Play' title='[% "PLAY" | string %]' onMouseOver="self.status='[% "PLAY" | string %]';return true"></a></nobr>
			</td>
			<td class="listing" width="3" align="center">&nbsp;</td>
			<td class="listing" width="11" align="center">
				<nobr><a href="[% webroot %]status_header.html?player=[% player | uri %]&command=playlist&sub=playtracks&listref=searchResults"  target="status"><img src="html/add.gif" border=0 align="center" width="8" height="8" alt='Add' title='[% "ADD_TO_PLAYLIST" | string %]' onMouseOver="self.status='[% "ADD_TO_PLAYLIST" | string %]';return true"></a></nobr>
			</td>
			<td class="listing" width="3" align="center">&nbsp;</td>
			<td class="listing" width="11" align="center">&nbsp;</td>
			<td  class="listing" width="3" align="center">&nbsp;</td>
		</tr>
		[% browse_list %]
	</table>
	[% END %]

	[% IF searchlist_pagebar %]
		<p>[% "PAGES" | string %][% "COLON" | string %][% searchlist_pagebar %]</p>
	[% END %]

	<p>&nbsp;</p></td>

[% PROCESS pagefooter.html %]
