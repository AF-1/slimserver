[% statuslink = 'status.html' %]

[%- BLOCK mixcontrol -%]
	<td width="20" align="right" class="label2"><nobr><b>[% label %][% "COLON" | string %]</b>
		<img src="[% webroot %]html/images/spacer.gif" width="1" height="36"></a>
	</nobr></td>
	<td width="6" align="left" class="label2" valign="center"><nobr>
		<table border="0" width="100%" cellspacing="0" cellpadding="0">
			[%- FOREACH level IN [100,84,72,60,50,36,24,12,0] -%]
				<tr><td align="center"><a href="[% statuslink %]?p0=mixer&p1=[% type %]&p2=level&player=[% player | uri %]&start=[% start %]">
				<img src=
				[%- IF level == 50 -%]
					"[% webroot %]html/images/pixel.middle[%- IF $type < '50' -%]_s[%- END -%].gif" height="5"
				[%- ELSE -%]
					"[% webroot %]html/images/pixel.green[%- IF $type < level -%]_s[%- END -%].gif" height="4" 
				[%- END -%]width="6"></a></td></tr>
			[%- END -%]
			<tr><td><img src="[% webroot %]html/images/spacer.gif" width="6" height="1"></td></tr>
		</table>
	</nobr></td>
[%- END -%]

[% BLOCK volumecontrol %]
	[% vols = {
			'2' => '0', '4' => '6', '6' => '12', '8' => '18',
			'10' => '24', '12' => '30', '14' => '36', '16' => '42', '18' => '48',
			'20' => '54', '22' => '60', '24' => '66', '26' => '72', '28' => '78',
			'30' => '84', '32' => '90', '34' => '95', '36' => '100',
		}
	%]
	[% FOREACH level = vols.nsort %]
		<td valign="bottom">
			<a href="[% statuslink %]?p0=mixer&p1=volume&p2=[% vols.$level %]&player=[% player | uri %]&start=[% start %]">
				<img src="[% webroot %]html/images/spacer.gif" width="3" height="[% level %]" hspace="0" vspace="0">
			</a>
		</td>
		<td valign="bottom">
			<a href="[% statuslink %]?p0=mixer&p1=volume&p2=[% vols.$level %]&player=[% player | uri %]&start=[% start %]">
				<img src="[% webroot %]html/images/pixel.green[% IF volume < vols.$level %]_s[% END %].gif" width="4" height="[% level %]" hspace="0" vspace="0">
			</a>
		</td>
	[% END %]
[% END %]

[% BLOCK statectrl %]
	<a class="[% IF not condition %]dark[% END %]button" href="[% statuslink %]?p0=[% item || 'playlist' %]&p1=[% command %]&p2=[% arg %]&player=[% player | uri %]&start=[% start %]"><b>[% cmdstring | string | upper%]</b></a>
[% END %]

[% BLOCK playctl %]
	<td>
		<a href="[% statuslink %]?[% command %]&player=[% player | uri %]&start=[% start %]">
		<img valign="bottom" id="gray" src="[% webroot %]html/images/[% img %][% IF condition %]_s[% END %].gif" border="1" width="[% width || 30 %]" height="[% height || 19 %]"><img id="tan" src="[% webroot %]html/images/[% img %][% IF condition %]_s[% END %]_tan.gif" width="[% width %]" height="[% height %]"></a>
	</td>
[% END -%]

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<meta http-equiv="refresh" content="[% refresh %]; url=[% statuslink %]?player=[% player | uri %]&amp;start=[% start %]&amp;undock=[% undock %]">
	[% PROCESS customheader.html %]
	[% IF playercount == '0' %]<script language="JavaScript">
		<!--Hide
		[% IF undock %]self.close();[% ELSE %]
		location="status.html";[% END %]

		-->
	</script>[% END %]
</head>
<body bgcolor="#FFFFFF" marginwidth="0" marginheight="0" topmargin="0" leftmargin="0" onload="javascript:checkReload();playlistResize(this.document);" onresize="javascript:playlistResize(this.document);">
	<div ID="header">
		<div class="masthead">
			<table border="0" cellpadding="0" cellspacing="0" width="100%" height="15" bordercolor="#111111">
				<td height="17" align="left">
					<img id="gray" border="0" src="[% webroot %]html/images/[% playermodel %]_logo.small.gif" width="98" height="17">
					<img id="tan" border="0" src="[% webroot %]html/images/squeezebox_logo.small_tan.gif" width="98" height="17">
				</td>
				<td align="right">
					[% IF sync %]
						<a href="[% statuslink %]?p0=sync&p1=-&player=[% player | uri %]">[% "UNSYNC" | string %]</a>
						 / 
					[% END %]
					[% IF mode != 'off' %]
						<A href="[% statuslink %]?p0=button&p1=sleep&player=[% player | uri %]">Sleep</a>[% IF sleeptime %] ([% sleep %])[% END %]
					 / [% END %]
					[% IF not nosetup  %]<a href="setup.html?page=player&player=[% player | uri %]&playerid=[% player | uri %]" target="browser">[% "SETTINGS" | string %]</a>
					[% END %][% IF not undock %] / 
					<a href="javascript:openRemote('[% player | uri %]','[% player_name %]')">Undock</a>[% END %]
				</nobr></td>
			</table>
		</div>
		<div class="menu1">
			<table border="0" cellpadding="0" cellspacing="0" width="100%" height="20" bordercolor="#111111">
				[% IF player_chooser_list  && NOT undock%]
					<form><td align="left">
						<select name="player" onchange="switchPlayer(this);" class="stdedit">[% player_chooser_list %]</select>
					</td></form>
				[% ELSE %]
					<td align="left">
						<span class="songtitle">[% IF player_name %][% player_name %][% END %]</span>
						[% IF sync %][% "SYNCHRONIZED_WITH" | string %] [% sync %][% END %]
					</td>
				[% END %]
			</table>
		</div>
	
		<script language="JavaScript">
		<!--
		if (document.all||document.getElementById)
			Click([% IF modeplay %]1[% ELSE %]0[% END %],[% IF durationseconds %][% durationseconds %][% ELSE %][% refresh %][% END %],[% IF songtime %][% songtime %][% ELSE %]0[% END %]);
		else
			window.onload=Click([% IF modeplay %]1[% ELSE %]0[% END %],[% IF durationseconds %][% durationseconds %][% ELSE %][% refresh %][% END %],[% IF songtime %][% songtime %][% ELSE %]0[% END %]);
		-->
		</script>
		<div class="nowplaying">
		<table border="0" cellspacing="0" cellpadding="0" width="100%">
			<tr>
				[% IF coverThumb %]<td valign="top">
					<a href="browsedb.html?hierarchy=album,track&level=1&album=[% track.album.id | uri %]&player=[% player | uri %]" target="browser"><img src="/music/[% coverThumb %]/thumb.jpg" height="100">
				</td>[% END %]
				<td><img src="[% webroot %]html/images/spacer.gif" width="5"></td>
				<td valign="top" width="100%">
					<p class="label">[% IF modeplay %][% "PLAYING" | string %][% END %]
					[% IF modepause %][% "PAUSED_ON" | string %][% END %]
					[% IF modestop %][% "STOPPED_ON" | string %][% END %]
					[% IF currentsong %]<b>[% currentsong %]</b> [% "OUT_OF" | string %] <b>&nbsp;[% songcount %]</b>&nbsp;<a class="label" href="[% statuslink %]?p0=playlist&p1=zap&p2=[% thissongnum %]&player=[% player | uri %]&start=[% start %]" title='Move to Zapped playlist'>[zap]</a>[% END %][% "COLON" | string %]</p>
					<p><a class="songtitle" href="songinfo.html?item=[% track.id %]&amp;player=[% player | uri %]" target="browser">[% songtitle %]</a>
					[% IF track.duration %]&nbsp;([% track.duration | html %])[% END %][% IF bitrate %]&nbsp;([% bitrate %])[% END %]</p>
					[% IF not coverThumb %]
					<table border="0" cellpadding="0" cellspacing="0" width="100%"><td width="50%" align="left"><nobr>[% END %]
						<p class="label">[% IF track.artist && track.artist != noArtist %][% "ARTIST" | string %]&nbsp;<a class="label" href="[% statuslink %]?p0=playlist&p1=deletealbum&p2=&p3=[% track.artist | uri %]&player=[% player | uri %]&astart=[% start %]" title='[% "REMOVE_FROM_PLAYLIST" | string %]'>[x]</a></p>
						<p class="artistname"><a class="artistname" href="browsedb.html?hierarchy=album,track&level=0&artist=[% track.artist.id %]&amp;player=[% player | uri %]" target="browser">[% track.artist | html %]</a></p>[% END %]
						[% IF not coverThumb %]</nobr></td><td><nobr>[% END %]
						<p class="label">[% IF track.album.title && track.album.title != noAlbum %][% "ALBUM" | string %]&nbsp;<a class="label" href="[% statuslink %]?p0=playlist&p1=deletealbum&p2=&p3=&p4=[% track.album.title | uri %]&player=[% player | uri %]&start=[% start %]" title='[% "REMOVE_FROM_PLAYLIST" | string %]'>[x]</a></p>
						<p><a class="artistname" href="browsedb.html?hierarchy=album,track&level=1&album=[% track.album.id %]&amp;player=[% player | uri %]" target="browser">[% track.album.title | html %]</a>[% END %]
						[% IF track.year %]&nbsp;([% track.year %])[% END %]</p>[% IF not coverthumb %]</td>
					</table>[% END %]
				</td>
			</tr>
		</table></div>
	
		<div class="menu2">
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
			<td align="center">
				<table border="0" cellspacing="0" cellpadding="0"><tr valign="bottom">
						[% PROCESS playctl command='p0=play' img='play' width='42' height='43' condition=modeplay && rate == 'norm' -%]
						[% PROCESS playctl command='p0=stop' img='stop' width='23' height='32' condition=modestop -%]
					<td><table border="0" cellspacing="0" cellpadding="0" align="bottom">
						<tr>[% IF isplayer %]
								[% PROCESS playctl command='p0=rate&p1=-2' width='30' height='19' img='rew'condition=rate == 'rew' -%]
								[% PROCESS playctl command='p0=rate&p1=8' img='ffwd' condition=rate == 'ffwd' -%]
						</tr><tr>[% END -%]
								[% PROCESS playctl command='p0=playlist&p1=jump&p2=-1' img='back' condition='0' -%]
								[% PROCESS playctl command='p0=playlist&p1=jump&p2=%2b1' img='forward' condition='0' -%]
								[% PROCESS playctl command='p0=pause' img='pause' condition=modepause -%]
							[% IF isplayer %]
								[% PROCESS playctl command='p0=button&p1=muting' img='mute' condition=mute -%]
							[% END -%]
						</tr>
					</table></td>
				</tr></table>
			</td>
			[% IF isplayer and not fixedVolume %]
			<td><img src="[% webroot %]html/images/pixel.grey.gif" width="1" height="100%"></td>
			<td align="center" class="label2">
				<table border="0" cellspacing="0" cellpadding="0">
					<td align="right" valign="bottom" class="label2"><B>[% "VOLUME" | string | upper%][% "COLON" | string %]</B></td>
					<td>
						<table border="0" width="100%" cellspacing="0" cellpadding="0"><tr><nobr>
							[% PROCESS volumecontrol %]
						</nobr></tr></table>
					</td>
					<td width="2%" >&nbsp;</td>
					[% PROCESS mixcontrol  type="bass" label='B' -%]
					[% PROCESS mixcontrol  type="treble" label='T' -%]
				</table>
			[% END %]
		</table></div>
		<div class="nowplaying">
		<table border="0" cellpadding="0" cellspacing="0" width="100%" height="11">
			<td [% IF isplayer %]width="30%"[% END %] class="label2" align="center"><nobr>
				<b>[% "REPEAT" | string | upper%][% "COLON" | string %]</b>
				[% FOREACH type = ['off','one','all'] %]
					[% PROCESS statectrl condition=repeat == loop.index command='repeat' arg=loop.index cmdstring=type %]
				[% END %]
				</nobr></td>
			<td align="center"><img src="[% webroot %]html/images/pixel.grey.gif" width="1" height="100%"></td>
			<td [% IF isplayer %]width="30%"[% END %] height="13" class="label2" align="center"><nobr>
				<b>[% "SHUFFLE" | string | upper%][% "COLON" | string %]</b>
				[% FOREACH type = ['off','song','album'] %]
					[% PROCESS statectrl condition=shuffle == loop.index command='shuffle' arg=loop.index cmdstring=type %]
				[% END %]
			</nobr></td>
			[% IF isplayer %]
				<td align="center"><img src="[% webroot %]html/images/pixel.grey.gif" width="1" height="100%"></td>
				<td height="13" width="30%" class="label2" align="center"><nobr>
					<b>[% "POWER" | string | upper%][% "COLON" | string %]</b>
					[% PROCESS statectrl condition=mode != 'off' item='power' command='1' arg='' cmdstring="ON" %]
					[% PROCESS statectrl condition=mode == 'off' command='0' arg='' cmdstring="OFF" %]
				</nobr></td>
			[% END %]
		</table></div>
		
		<table width="100%"><tr><td align="left">
			[% "CURRENT_PLAYLIST" | string %][% "COLON" | string %]
			[% IF current_playlist %][% current_playlist_name %]
			([% IF myClientState; myClientState.playlist.size; END; %] [% "SONGS" | string %])[% IF current_playlist_modified %]([% "MODIFIED" | string %])[% END %][% END %]
		</td><td align="right">
			[% IF cansave %]&nbsp;<a target="browser" href="edit_playlist.html?player=[% player | uri %]&saveCurrentPlaylist=1">[% "SAVE" | string %]</a> | [% END %]
			<a href="status.m3u?player=[% player | uri %]" target="playlist">[% "DOWNLOAD" | string %]</a> |
			<a href="[% statuslink %]?p0=playlist&p1=clear&player=[% player | uri %]" target="status">[% "CLEAR" | string %]</a>
		</td>
		</tr></table>
	</div>
	<script language="JavaScript">playlistResize(this.document);</script>
</body>
</html>
