[% IF query %]
 [%# Add the search query to each link if available %]
 [% searchquery = 'query=' _ query _ '&amp;' %]
[% END %]


[% FILTER null %]

[% pwd_list = [];
 FOREACH crumb IN crumb;
  crumbItem = BLOCK %]
<a href="index.html?[% searchquery %]index=[% crumb.index %]">[% crumb.name %]</a>
  [% END %]
  [% pwd_list.push(crumbItem) %]
 [% END %]
[% END # filter -%]

[% PROCESS header.html clink="4" %]

<div id="pwd">
 [%- IF hasPagebar ; PROCESS pagebar ; END %]
 <a onclick='goradio()'>[% "RADIO" | string %]</a> /
 [% PROCESS crumblist %] /
</div>

[% IF msg %]
 <p>[% msg %]</p>
[% END %]

[% IF streaminfo %]

<table id="songinfotable">

 [% IF streaminfo.item.image %]
 <tr><td><img src="[% streaminfo.item.image %]" /></td></tr>
 [% END %]

 <tr> 
  <td class="infotitlecol">[% "TITLE" | string; "COLON" | string %]</td>
  <td>[% (streaminfo.item.name || streaminfo.item.title) | html %]</td>
 </tr>

 [% IF streaminfo.item.subtitle %]
  <tr>
   <td class="infotitlecol">[% "XML_SUBTITLE" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.subtitle | html %]</td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.pubdate %]
  <tr>
   <td class="infotitlecol">[% "XML_DATE" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.pubdate | html %]</td>
  </tr>
 [% END %]  
  
 [% IF streaminfo.item.url %]
  <tr>
   <td class="infotitlecol">[% "URL" | string; "COLON" | string %]</td>
   <td><a href="[% streaminfo.item.url | html %]" target="_blank">[% streaminfo.item.url | html %]</a></td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.description %]
  <tr>
   <td class="infotitlecol">[% "DESCRIPTION" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.description | html %]</td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.summary %]
  <tr>
   <td class="infotitlecol">[% "XML_SUMMARY" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.summary | html %]</td>
  </tr>
 [% END %]  
  
 [% IF streaminfo.item.link %]
  <tr>
   <td class="infotitlecol">[% "XML_LINK" | string; "COLON" | string %]</td>
   <td><a href="[% streaminfo.item.link | html %]" target="_blank">[% streaminfo.item.link | html %]</a></td>
  </td>
 [% END %]
  
 [% IF streaminfo.item.enclosure %]
  <tr>
   <td class="infotitlecol">[% "XML_ENCLOSURE" | string; "COLON" | string %]</td>
   <td>
    <a href="[% streaminfo.item.enclosure.url | html %]" target="_blank">[% streaminfo.item.enclosure.url | html %]</a><br />
    [% FILTER format('%.2f'); streaminfo.item.enclosure.length / 1048576; END %] MB
   </td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.duration %]
  <tr>
   <td class="infotitlecol">[% "LENGTH" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.duration | html %]</td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.explicit %]
  <tr>
   <td class="infotitlecol">[% "XML_EXPLICIT" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.explicit | html %]</td>
  </tr>
 [% END %]  
  
 [% IF streaminfo.item.bitrate %]
  <tr>
   <td class="infotitlecol">[% "BITRATE" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.bitrate | html %] [% "KBPS" | string %]</td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.listeners %]
  <tr>
   <td class="infotitlecol">[% "NUMBER_OF_LISTENERS" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.listeners | html %]</td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.current_track %]
  <tr>
   <td class="infotitlecol">[% "NOW_PLAYING" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.current_track | html %]</td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.genre %]
  <tr>
   <td class="infotitlecol">[% "GENRE" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.genre | html %]</td>
  </tr>
 [% END %]
  
 [% IF streaminfo.item.source %]
  <tr>
   <td class="infotitlecol">[% "SOURCE" | string; "COLON" | string %]</td>
   <td>[% streaminfo.item.source | html %]</td>
  </tr>
 [% END %]  

</table>

[% IF streaminfo.item.enclosure || streaminfo.item.url %]
<div class="browselistbuttons" style="margin:10px">
 <a border="0" href="index.html?[% searchquery %]action=add&amp;index=[% streaminfo.index %]"
 ><img height="8" src="[%webroot%]html/images/add.gif" alt="[%'ADD'|string%]" title="[%'ADD'|string%]" width="8" /></a><a
 border="0" href="index.html?[% searchquery %]action=add&amp;index=[% streaminfo.index %]"
 ><img src="[%webroot%]html/images/play.this.gif" width="5" height="9" alt="[%'PLAY'|string%]" title="[%'PLAY'|string%]"/></a>
</div>
[% END %]

[% END %]

[% IF search %]
 <form id="searchForm" name="searchForm" method="GET" target="_self" style="margin: 5px">
  <input type="text" id="query" name="query" size="40" value="[% query %]"/>
  <input name="submit" type="submit" class="stdclick" value="[% "SEARCH" | string %]"><p>
  <input type="hidden" value="[% player %]" name="player">
 </form>
[% END %]

[%- IF items -%]

<table>

[% IF itemsHaveAudio %]
 <tr>
  <td class="browselistbuttons">
   <a border="0" href="index.html?[% searchquery %]action=playall&amp;index=[% currentIndex %]"
   ><img height="8" src="[%webroot%]html/images/add.gif" alt="[%'ADD'|string%]" title="[%'ADD'|string%]" width="8" /></a><a
   border="0" href="index.html?[% searchquery %]action=add&amp;index=[% currentIndex %]"
   ><img src="[%webroot%]html/images/play.this.gif" width="5" height="9" alt="[%'PLAY'|string%]" title="[%'PLAY'|string%]"/></a>
  </td>
  <td class="browselisting">
   [% "ALL_SONGS" | string %]
  </td>
 </tr>
[% END %]

[%- FOREACH item = items %]
 <tr>
  <td class="browselistbuttons">
   [% IF item.type == 'audio' || item.enclosure %]
    <a border="0" href="index.html?[% searchquery %]action=add&amp;index=[% index _ (start + loop.index) %]"
    ><img height="8" src="[%webroot%]html/images/add.gif" alt="[%'ADD'|string%]" title="[%'ADD'|string%]" width="8" /></a><a
    border="0" href="index.html?[% searchquery %]action=add&amp;index=[% index _ (start + loop.index) %]"
    ><img src="[%webroot%]html/images/play.this.gif" width="5" height="9" alt="[%'PLAY'|string%]" title="[%'PLAY'|string%]"/></a>
   [% ELSE %]
     <a border="0" href="index.html?[% searchquery %]index=[% index _ (start + loop.index) %]"
    ><img height="9" src="[%webroot%]html/images/arrow.gif" alt="Next" title="Next" width="8" /></a>
   [% END %]
  </td>
  <td class="browselisting">
   <a href="index.html?[% searchquery %]index=[% index _ (start + loop.index) %]">[% item.name || item.title %]</a>
  </td>
 </tr>
[%- END -%]

</table>

[% END %]
</body>
</html>
