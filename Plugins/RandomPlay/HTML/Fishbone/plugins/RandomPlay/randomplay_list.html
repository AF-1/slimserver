[% pagetitle = 'PLUGIN_RANDOM' %] [% pageicon = 'PLUGIN_RANDOM' %]

[% PROCESS pageheader.html %]

[% BLOCK playImage %]
	<img src="[% webroot %]html/images/play.this.gif" width="9" height="11" alt="[% "PLAY" | string %]" title="[% "PLAY" | string %]">
[% END %]

[% BLOCK playLink %]
	<a href="[% webroot %]plugins/RandomPlay/randomplay_mix.html?type=[% type %]&player=[% player | uri %]" [% INCLUDE reloadStatusFrame.html %]>
	[% PROCESS playImage %]</a>
[% END %]

[% BLOCK addImage %]
	<img src="[% webroot %]html/images/add.gif" width="11" height="11" alt="[% "ADD" | string %]" title="[% "ADD" | string %]">
[% END %]

[% BLOCK addLink %]
	<a href="[% webroot %]plugins/RandomPlay/randomplay_mix.html?type=[% type %]&player=[% player | uri %]&addOnly=1" [% INCLUDE reloadStatusFrame.html %]>
	[% PROCESS addImage %]</a>
[% END %]

<p>
<h3>[% "PLUGIN_RANDOM" | string %]</h3><p>

 / <a href="">[% "PLUGIN_RANDOM" | string %]</a>
<p><hr><p>

<br>

[% IF warn %]
	<b>[% "NOTE" | string %]</b> [% "SCAN_WARNING" | string %]
	[% IF audiodir %]
		[% "SCAN_CLICK" | string %] <a href="[% webroot %]browse.html?player=[% player | uri %]">[% "HERE" | string %]</a>.
	[% END %]
[% END %]

<form action="[% webroot %]plugins/RandomPlay/randomplay_settings.html">
[% IF player == '' %]
	<p>[% "NO_PLAYER_FOUND" | string %]</p>
[% END %]
[% IF player != '' %]
	<table border="0"cellspacing="0" cellpadding="0" width="100%">

		<tr>
			<td class="listing"><b>[% "PLUGIN_RANDOM_CHOOSE_DESC" | string %]</b></td>
			<td class="listing"></td>
		</tr>

		<tr>
			<td class="listing">[% "PLUGIN_RANDOM_TRACK_DESC" | string %]</td>
			<td class="listing" width="11">[% PROCESS playLink type="track" %]</td>
			<td class="listing" width="11">[% PROCESS addLink type="track" %]</td>
		</tr>

		<tr>
			<td class="listing">[% "PLUGIN_RANDOM_ARTIST_DESC" | string %]</td>
			<td class="listing" width="11">[% PROCESS playLink type="artist" %]</td>
			<td class="listing" width="11">[% PROCESS addLink type="artist" %]</td>
		</tr>

		<tr>
			<td class="listing">[% "PLUGIN_RANDOM_ALBUM_DESC" | string %]</td>
			<td class="listing" width="11">[% PROCESS playLink type="album" %]</td>
			<td class="listing" width="11">[% PROCESS addLink type="album" %]</td>
		</tr>

		<tr>
			<td class="listing">[% "PLUGIN_RANDOM_YEAR_DESC" | string %]</td>
			<td class="listing" width="11">[% PROCESS playLink type="year" %]</td>
			<td class="listing" width="11">[% PROCESS addLink type="year" %]</td>
		</tr>
</table>
[% END %]
<table>
				<tr>
					<td></td>
				</tr>

				<tr>
					<hr><h3>[% "SETUP_MIX_SETTINGS" | string %]:</h3>
				</tr>

				<tr>
					<td class="even"></td>
				</tr>

				<tr>
					<h3>[% "PLUGIN_RANDOM_GENRE_FILTER" | string %]</h3>
				</tr>

				<tr>
					[% "SETUP_SELECT_GENRES_DESC" | string %]
				</tr>
				<tr>
					<td class="even">
						<table border="0">
							[% PERL %]
								require POSIX;

								my $genreList = $stash->{'pluginRandomGenreList'};
								my @keys = sort(keys(%$genreList));
								my $inc = POSIX::ceil(@keys / 2);
								my ($genre, $checkedString);
								for (my $i = 0; $i < $inc; $i++) {
									$genre = $keys[$i];
									$checkedString = $genreList->{$genre} ? 'checked' : '';
									print "<tr><td><label for='${genre}CheckBox'>$genre</label></td>\n";
									print "<td><input type='checkbox' name='genre_$genre' id='${genre}CheckBox' value='1' $checkedString></td>\n";
									if ($i + $inc < @keys) {
										$genre = $keys[$i + $inc];
										$checkedString = $genreList->{$genre} ? 'checked' : '';
										print '<td>' . '&nbsp;' x 10 . "</td>\n";
										print "<td><label for='${genre}CheckBox'>$genre</label></td>\n";
										print "<td><input type='checkbox' name='genre_$genre' id='${genre}CheckBox' value='1' $checkedString></td>\n";
									}
									print '</tr>';
								}
							[% END %]
						</table>
					</td>
				</tr>
				<tr>
					<td class="even"><input type="submit" value="[% "CHANGE" | string %]"></td>
				</tr>

				<tr>
					<td class="even">
						<label>
							<b>[% "SETUP_PLUGIN_RANDOM_NUMBER_OF_TRACKS" | string %]:</b>
							<input class="stdedit" type="text" size="3" name="numTracks" value="[% pluginRandomNumTracks %]">
						</label>
					</td>
				</tr>

				<tr>
					<td class="even">[% "SETUP_PLUGIN_RANDOM_NUMBER_OF_TRACKS_DESC" | string %]</td>

				<tr>
					<td class="even"></td>
				</tr>

				<tr>
					<td class="even">
						<label>
							<b>[% "SETUP_PLUGIN_RANDOM_NUMBER_OF_OLD_TRACKS" | string %]:</b>
							<input class="stdedit" type="text" size="3" name="numOldTracks" value="[% pluginRandomNumOldTracks %]">
						</label>
					</td>
				</tr>

				<tr>
					<td class="even">[% "SETUP_PLUGIN_RANDOM_NUMBER_OF_OLD_TRACKS_DESC" | string %]</td>
				</tr>

				<tr>
					<td class="even"><input type="submit" value="[% "CHANGE" | string %]"></td>
				</tr>
			</table>
		</form>
[% PROCESS pagefooter.html %]
