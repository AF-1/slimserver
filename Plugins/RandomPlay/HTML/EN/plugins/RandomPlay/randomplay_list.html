[% BLOCK playLink %]
	<a href="[% webroot %]plugins/RandomPlay/randomplay_mix.html?type=[% type %]&player=[% player | uri %]" [% INCLUDE reloadStatusFrame.html %]>
	[% "PLAY" | string %]</a>
[% END %]

[% BLOCK addLink %]
	<a href="[% webroot %]plugins/RandomPlay/randomplay_mix.html?type=[% type %]&player=[% player | uri %]&addOnly=1" [% INCLUDE reloadStatusFrame.html %]>
	[% "ADD" | string %]</a>
[% END %]

<html>
	<head>
		<title>[% "PLUGIN_RANDOM" | string %]</title>
		<link rel="stylesheet" href="[% webroot %]slimserver.css">
	</head>
	<body bgcolor="#FFFFFF">

		<p>
		<h3>[% "PLUGIN_RANDOM" | string %]</h3><p>

		<a href="[% webroot %]home.html?player=[% player | uri %]">[% "HOME" | string %]</a> / <a href="">[% "PLUGIN_RANDOM" | string %]</a>

		<p><hr><p>
		
	<form action="[% webroot %]plugins/RandomPlay/randomplay_settings.html">

		[% IF player == '' %]
			<p>[% "NO_PLAYER_FOUND" | string %]</p>
		[% END %]
		[% IF player != '' %]
			<table cellspacing="0" border="0" cellpadding="4" width="100%">
	
				<tr>
					<td class="even">[% "PLUGIN_RANDOM_CHOOSE_DESC" | string %]</td>
					<td class="even"></td>
				</tr>
	
				<tr>
					<td></td>
					<td></td>
				</tr>
	
				<tr>
					<td class="even"> [% "PLUGIN_RANDOM_TRACK_DESC" | string %]</td>
					<td class="even">[% PROCESS playLink type="track" %]</td>
					<td class="even">[% PROCESS addLink type="track" %]</td>
				</tr>
	
				<tr>
					<td class="even"> [% "PLUGIN_RANDOM_ARTIST_DESC" | string %]</td>
					<td class="even">[% PROCESS playLink type="artist" %]</td>
					<td class="even">[% PROCESS addLink type="artist" %]</td>
				</tr>
	
				<tr>
					<td class="even"> [% "PLUGIN_RANDOM_ALBUM_DESC" | string %]</td>
					<td class="even">[% PROCESS playLink type="album" %]</td>
					<td class="even">[% PROCESS addLink type="album" %]</td>
				</tr>
	
				<tr>
					<td class="even"> [% "PLUGIN_RANDOM_YEAR_DESC" | string %]</td>
					<td class="even">[% PROCESS playLink type="year" %]</td>
					<td class="even">[% PROCESS addLink type="year" %]</td>
				</tr>
	
		[% END %]
				<tr>
					<td></td>
				</tr>

				<tr>
					<td class="even">
						<hr><h3>[% "SETUP_MIX_SETTINGS" | string %]:</h3></td>
				</tr>

				<tr>
					<td class="even"></td>
				</tr>

				<tr>
					<td class="even"><h3>[% "PLUGIN_RANDOM_GENRE_FILTER" | string %]</h3></td>
				</tr>

				<tr>
					<td class="even">[% "SETUP_SELECT_GENRES_DESC" | string %]</td>
				</tr>

				<tr>
					<td class="even">
						<table border="0">
							[% PERL %]
								require POSIX;

								my $genreList = $stash->{'pluginRandomGenreList'};
								my @keys = sort(keys(%$genreList));
								my $inc = POSIX::ceil(@keys / 2);
								my ($genre, $checkedString);
								for (my $i = 0; $i < $inc; $i++) {
									$genre = $keys[$i];
									$checkedString = $genreList->{$genre} ? 'checked' : '';
									print "<tr><td><label for='${genre}CheckBox'>$genre</label></td>\n";
									print "<td><input type='checkbox' name='genre_$genre' id='${genre}CheckBox' value='1' $checkedString></td>\n";
									if ($i + $inc < @keys) {
										$genre = $keys[$i + $inc];
										$checkedString = $genreList->{$genre} ? 'checked' : '';
										print '<td>' . '&nbsp;' x 10 . "</td>\n";
										print "<td><label for='${genre}CheckBox'>$genre</label></td>\n";
										print "<td><input type='checkbox' name='genre_$genre' id='${genre}CheckBox' value='1' $checkedString></td>\n";
									}
									print '</tr>';
								}
							[% END %]
						</table>
					</td>
				</tr>
				<tr>
					<td class="even"><input type="submit" value="[% "CHANGE" | string %]"></td>
				</tr>

				<tr>
					<td class="even">
						<label>
							<b>[% "SETUP_PLUGIN_RANDOM_NUMBER_OF_TRACKS" | string %]:</b>
							<input class="stdedit" type="text" size="3" name="numTracks" value="[% pluginRandomNumTracks %]">
						</label>
					</td>
				</tr>

				<tr>
					<td class="even">[% "SETUP_PLUGIN_RANDOM_NUMBER_OF_TRACKS_DESC" | string %]</td>

				<tr>
					<td class="even"></td>
				</tr>

				<tr>
					<td class="even">
						<label>
							<b>[% "SETUP_PLUGIN_RANDOM_NUMBER_OF_OLD_TRACKS" | string %]:</b>
							<input class="stdedit" type="text" size="3" name="numOldTracks" value="[% pluginRandomNumOldTracks %]">
						</label>
					</td>
				</tr>

				<tr>
					<td class="even">[% "SETUP_PLUGIN_RANDOM_NUMBER_OF_OLD_TRACKS_DESC" | string %]</td>
				</tr>

				<tr>
					<td class="even"><input type="submit" value="[% "CHANGE" | string %]"></td>
				</tr>
			</table>
		</form>
	</body>
</html>
