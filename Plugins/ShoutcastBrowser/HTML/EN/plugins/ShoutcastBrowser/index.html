[%- pagetitle = 'PLUGIN_SHOUTCASTBROWSER_MODULE_NAME' | string; pageicon = 'RADIO'; noSpacer = NOT streaminfo; -%]
[%- pwd_list = BLOCK -%]
	/ [% IF streams || streaminfo %]<a href="index.html?player=[% player | uri %]">[% END %][% "PLUGIN_SHOUTCASTBROWSER_MODULE_NAME" | string %][% IF streams || streaminfo %]</a> / 
	[% ELSE %] (<a href="index.html?player=[% player | uri %]&action=refresh">[% 'PLUGIN_SHOUTCASTBROWSER_REFRESH' | string %]</a>)[% END %]
	[% IF streams || streaminfo %][% IF streaminfo %]<a href="index.html?genreID=[% genreID | uri %]&player=[% player | uri %]">[% END %][% genre %][% IF streaminfo %]</a> /[% END %][% END %]
	[% IF streaminfo %][% stream %][% END %]
[%- END -%]
[% PROCESS pageheader.html %]
		<br>
		<table border="0" cellspacing="0" cellpadding="4" width="100%">
			[% IF msg %]<tr><td><b>[% msg %]</b></td></tr>[% END %]
			[% IF redirect %]
				<p><br>[% 'PLUGIN_SHOUTCASTBROWSER_REDIRECT' | string %]</p>
				<p>(<a href="[% redirect.url %]">[% 'PLUGIN_SHOUTCASTBROWSER_CLICK_REDIRECT' | string %]</a>)</p>
			[% END %]

			[% IF streaminfo %]
				[% BLOCK streaminfo %][% IF content %]
				<tr>
					<td>[% title | string %][% "COLON" | string %]</td>
					<td>[% content %]</td>
				</tr>
				[% END %][% END %]

				[% WRAPPER streaminfo title='TITLE' %]
					<a href="index.html?genreID=[% genreID | uri %]&streamID=[% streamID | uri %]&bitrate=[% streaminfo.2 | uri %]&action=play&player=[% player | uri %]">[% stream %]</a>
				[% END %]

				[% WRAPPER streaminfo title='BITRATE' %][% streaminfo.2 %][% 'PLUGIN_SHOUTCASTBROWSER_KBPS' | string %][% END %]
				[% WRAPPER streaminfo title='SETUP_PLUGIN_SHOUTCASTBROWSER_NUMBEROFLISTENERS' %][% streaminfo.1 %][% END %]
				[% WRAPPER streaminfo title='GENRE' %][% streaminfo.4 %][% END %]
				[% WRAPPER streaminfo title='PLUGIN_SHOUTCASTBROWSER_WAS_PLAYING' %][% streaminfo.3 %][% END %]

				[% WRAPPER streaminfo title='URL' %]
					<a href="[% streaminfo.0 %]" target="_blank">[% streaminfo.0 %]</a>
				[% END %]
			[% END %]

			[% odd = 1 %]
			[% IF genres %]
				[% FOREACH genre = genericGenres %]
					<tr>
						[% title=genre.value.token | string; WRAPPER listitem %]
							href="index.html?genreID=[% genre.key | uri %]&player=[% player | uri %]"
						[% END %]
						[% WRAPPER descendlink %]href="index.html?genreID=[% genre.key | uri %]&player=[% player | uri %]"[% END %]
					</tr>
					[% odd = (not odd) %]
				[% END %]

				[% genreID = 0 %]
				[% FOREACH genre = genres %]
					<tr>
						[% WRAPPER listitem title=genre %]
							href="index.html?genreID=[% genreID | uri %]&player=[% player | uri %]"
						[% END %]
						[% WRAPPER descendlink %]href="index.html?genreID=[% genreID | uri %]&player=[% player | uri %]"[% END %]
					</tr>
					[% odd = (not odd) %]
					[% genreID = genreID + 1 %]
				[% END %]
			[% END %]

			[% IF streams %]
				[% streamID = 0 %]
				[% FOREACH stream = mystreams %]
					[% FOREACH bitrate = streams.$stream %]
						<tr>
							[% title = BLOCK %][% stream %][% IF bitrate.key %] ([% bitrate.key %] [% "PLUGIN_SHOUTCASTBROWSER_KBPS" | string %], [% bitrate.value.1 %] [% "SETUP_PLUGIN_SHOUTCASTBROWSER_LISTENERS" | string %])[% END; END %]
							[% WRAPPER listitem %]
								[% IF bitrate.key %]href="index.html?genreID=[% genreID | uri %]&streamID=[% streamID | uri %]&bitrate=[% bitrate.key | uri %]&action=info&player=[% player | uri %]"[% END %]
							[% END %]
							[% WRAPPER playlink noTarget = '1' %]href="index.html?genreID=[% genreID | uri %]&streamID=[% streamID | uri %]&bitrate=[% bitrate.key | uri %]&action=play&player=[% player | uri %]"[% END %]
							[% WRAPPER addlink noTarget = '1' %]href="index.html?genreID=[% genreID | uri %]&streamID=[% streamID | uri %]&bitrate=[% bitrate.key | uri %]&action=add&player=[% player | uri %]"[% END %]
						</tr>
						[% odd = (not odd) %]
					[% END %]
					[% streamID = streamID + 1 %]
				[% END %]
			[% END %]
		</table>
		<br>

[% PROCESS pagefooter.html %]

